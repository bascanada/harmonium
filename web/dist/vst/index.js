(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Dr="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Dr);let xt=!1,Rr=!1;function Pr(){xt=!0}Pr();const Cr=1,kr=2,Nn=4,Ar=8,Vr=16,Nr=1,Or=2,Ir=4,Fr=8,jr=16,Hr=1,Lr=2,ne=Symbol(),Br="http://www.w3.org/1999/xhtml",Qt=!1;var On=Array.isArray,qr=Array.prototype.indexOf,Lt=Array.from,Ur=Object.defineProperty,ht=Object.getOwnPropertyDescriptor,In=Object.getOwnPropertyDescriptors,Gr=Object.prototype,Yr=Array.prototype,ln=Object.getPrototypeOf,xn=Object.isExtensible;function zr(t){return t()}function $t(t){for(var e=0;e<t.length;e++)t[e]()}function Fn(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}const te=2,jn=4,Bt=8,Kr=1<<24,Ue=16,Ge=32,it=64,qt=128,Pe=512,Q=1024,pe=2048,Ce=4096,ge=8192,Be=16384,un=32768,pt=65536,wn=1<<17,Hn=1<<18,wt=1<<19,Ln=1<<20,Le=1<<25,nt=32768,en=1<<21,cn=1<<22,Xe=1<<23,vt=Symbol("$state"),Wr=Symbol("legacy props"),Xr=Symbol(""),ct=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Bn(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Zr(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Jr(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Qr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $r(t){throw new Error("https://svelte.dev/e/effect_orphan")}function es(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ts(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function ns(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function rs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ss(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function is(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function as(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function qn(t){return t===this.v}function os(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Un(t){return!os(t,this.v)}let Y=null;function mt(t){Y=t}function ke(t,e=!1,n){Y={p:Y,i:!1,c:null,e:null,s:t,x:null,l:xt&&!e?{s:null,u:null,$:[]}:null}}function Ae(t){var e=Y,n=e.e;if(n!==null){e.e=null;for(var r of n)sr(r)}return e.i=!0,Y=e.p,{}}function St(){return!xt||Y!==null&&Y.l===null}let Qe=[];function Gn(){var t=Qe;Qe=[],$t(t)}function Ut(t){if(Qe.length===0&&!Dt){var e=Qe;queueMicrotask(()=>{e===Qe&&Gn()})}Qe.push(t)}function ls(){for(;Qe.length>0;)Gn()}function Yn(t){var e=H;if(e===null)return I.f|=Xe,t;if((e.f&un)===0){if((e.f&qt)===0)throw t;e.b.error(t)}else _t(t,e)}function _t(t,e){for(;e!==null;){if((e.f&qt)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const At=new Set;let L=null,Ot=null,Te=null,Ee=[],Gt=null,tn=!1,Dt=!1;class Ne{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#i=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){Ee=[],Ot=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)this.#a(r,n);this.is_fork||this.#c(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(Ot=this,L=null,Sn(n.render_effects),Sn(n.effects),Ot=null,this.#l?.resolve()),Te=null}#a(e,n){e.f^=Q;for(var r=e.first;r!==null;){var i=r.f,a=(i&(Ge|it))!==0,o=a&&(i&Q)!==0,c=o||(i&ge)!==0||this.skipped_effects.has(r);if((r.f&qt)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!c&&r.fn!==null){a?r.f^=Q:(i&jn)!==0?n.effects.push(r):Et(r)&&((r.f&Ue)!==0&&this.#i.add(r),bt(r));var u=r.first;if(u!==null){r=u;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=f.next,f=f.parent}}#o(e){for(const n of e)(n.f&pe)!==0?this.#i.add(n):(n.f&Ce)!==0&&this.#s.add(n),this.#u(n.deps),ee(n,Q)}#u(e){if(e!==null)for(const n of e)(n.f&te)===0||(n.f&nt)===0||(n.f^=nt,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&Xe)===0&&(this.current.set(e,e.v),Te?.set(e,e.v))}activate(){L=this,this.apply()}deactivate(){L===this&&(L=null,Te=null)}flush(){if(this.activate(),Ee.length>0){if(zn(),L!==null&&L!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(At.size>1){this.previous.clear();var e=Te,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const a of At){if(a===this){n=!1;continue}const o=[];for(const[u,f]of this.current){if(a.current.has(u))if(n&&f!==a.current.get(u))a.current.set(u,f);else continue;o.push(u)}if(o.length===0)continue;const c=[...a.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var i=Ee;Ee=[];const u=new Set,f=new Map;for(const h of o)Kn(h,c,u,f);if(Ee.length>0){L=a,a.apply();for(const h of Ee)a.#a(h,r);a.deactivate()}Ee=i}}L=null,Te=e}this.committed=!0,At.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#i)this.#s.delete(e),ee(e,pe),rt(e);for(const e of this.#s)ee(e,Ce),rt(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=Fn()).promise}static ensure(){if(L===null){const e=L=new Ne;At.add(L),Dt||Ne.enqueue(()=>{L===e&&e.flush()})}return L}static enqueue(e){Ut(e)}apply(){}}function us(t){var e=Dt;Dt=!0;try{for(var n;;){if(ls(),Ee.length===0&&(L?.flush(),Ee.length===0))return Gt=null,n;zn()}}finally{Dt=e}}function zn(){var t=et;tn=!0;var e=null;try{var n=0;for(Ft(!0);Ee.length>0;){var r=Ne.ensure();if(n++>1e3){var i,a;cs()}r.process(Ee),Ze.clear()}}finally{tn=!1,Ft(t),Gt=null}}function cs(){try{es()}catch(t){_t(t,Gt)}}let He=null;function Sn(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Be|ge))===0&&Et(r)&&(He=new Set,bt(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?or(r):r.fn=null),He?.size>0)){Ze.clear();for(const i of He){if((i.f&(Be|ge))!==0)continue;const a=[i];let o=i.parent;for(;o!==null;)He.has(o)&&(He.delete(o),a.push(o)),o=o.parent;for(let c=a.length-1;c>=0;c--){const u=a[c];(u.f&(Be|ge))===0&&bt(u)}}He.clear()}}He=null}}function Kn(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const a=i.f;(a&te)!==0?Kn(i,e,n,r):(a&(cn|Ue))!==0&&(a&pe)===0&&Wn(i,e,r)&&(ee(i,pe),rt(i))}}function Wn(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&te)!==0&&Wn(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function rt(t){for(var e=Gt=t;e.parent!==null;){e=e.parent;var n=e.f;if(tn&&e===H&&(n&Ue)!==0&&(n&Hn)===0)return;if((n&(it|Ge))!==0){if((n&Q)===0)return;e.f^=Q}}Ee.push(e)}function fs(t){let e=0,n=st(0),r;return()=>{Pt()&&(s(n),zt(()=>(e===0&&(r=y(()=>t(()=>Rt(n)))),e+=1,()=>{Ut(()=>{e-=1,e===0&&(r?.(),r=void 0,Rt(n))})})))}}var ds=pt|wt|qt;function hs(t,e,n){new vs(t,e,n)}class vs{parent;#e=!1;#t;#r=null;#n;#l;#i;#s=null;#a=null;#o=null;#u=null;#c=null;#f=0;#d=0;#v=!1;#h=null;#g=fs(()=>(this.#h=st(this.#f),()=>{this.#h=null}));constructor(e,n,r){this.#t=e,this.#n=n,this.#l=r,this.parent=H.b,this.#e=!!this.#n.pending,this.#i=Kt(()=>{H.b=this;{var i=this.#_();try{this.#s=Me(()=>r(i))}catch(a){this.error(a)}this.#d>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},ds)}#b(){try{this.#s=Me(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#x(){const e=this.#n.pending;e&&(this.#a=Me(()=>e(this.#t)),Ne.enqueue(()=>{var n=this.#_();this.#s=this.#p(()=>(Ne.ensure(),Me(()=>this.#l(n)))),this.#d>0?this.#m():($e(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#_(){var e=this.#t;return this.#e&&(this.#c=Je(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var n=H,r=I,i=Y;Ie(this.#i),he(this.#i),mt(this.#i.ctx);try{return e()}catch(a){return Yn(a),null}finally{Ie(n),he(r),mt(i)}}#m(){const e=this.#n.pending;this.#s!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),cr(this.#s,this.#u)),this.#a===null&&(this.#a=Me(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}this.#d+=e,this.#d===0&&(this.#e=!1,this.#a&&$e(this.#a,()=>{this.#a=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#y(e),this.#f+=e,this.#h&&yt(this.#h,this.#f)}get_effect_pending(){return this.#g(),s(this.#h)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw e;this.#s&&(ve(this.#s),this.#s=null),this.#a&&(ve(this.#a),this.#a=null),this.#o&&(ve(this.#o),this.#o=null);var i=!1,a=!1;const o=()=>{if(i){as();return}i=!0,a&&is(),Ne.ensure(),this.#f=0,this.#o!==null&&$e(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#v=!1,Me(()=>this.#l(this.#t)))),this.#d>0?this.#m():this.#e=!1};var c=I;try{he(null),a=!0,n?.(e,o),a=!1}catch(u){_t(u,this.#i&&this.#i.parent)}finally{he(c)}r&&Ut(()=>{this.#o=this.#p(()=>{Ne.ensure(),this.#v=!0;try{return Me(()=>{r(this.#t,()=>e,()=>o)})}catch(u){return _t(u,this.#i.parent),null}finally{this.#v=!1}})})}}function ps(t,e,n,r){const i=St()?Yt:We;if(n.length===0&&t.length===0){r(e.map(i));return}var a=L,o=H,c=ms();function u(){Promise.all(n.map(f=>_s(f))).then(f=>{c();try{r([...e.map(i),...f])}catch(h){(o.f&Be)===0&&_t(h,o)}a?.deactivate(),It()}).catch(f=>{_t(f,o)})}t.length>0?Promise.all(t).then(()=>{c();try{return u()}finally{a?.deactivate(),It()}}):u()}function ms(){var t=H,e=I,n=Y,r=L;return function(a=!0){Ie(t),he(e),mt(n),a&&r?.activate()}}function It(){Ie(null),he(null),mt(null)}function Yt(t){var e=te|pe,n=I!==null&&(I.f&te)!==0?I:null;return H!==null&&(H.f|=wt),{ctx:Y,deps:null,effects:null,equals:qn,f:e,fn:t,reactions:null,rv:0,v:ne,wv:0,parent:n??H,ac:null}}function _s(t,e){let n=H;n===null&&Zr();var r=n.b,i=void 0,a=st(ne),o=!I,c=new Map;return Rs(()=>{var u=Fn();i=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{f===L&&f.committed&&f.deactivate(),It()})}catch(l){u.reject(l),It()}var f=L;if(o){var h=!r.is_pending();r.update_pending_count(1),f.increment(h),c.get(f)?.reject(ct),c.delete(f),c.set(f,u)}const v=(l,m=void 0)=>{if(f.activate(),m)m!==ct&&(a.f|=Xe,yt(a,m));else{(a.f&Xe)!==0&&(a.f^=Xe),yt(a,l);for(const[S,T]of c){if(c.delete(S),S===f)break;T.reject(ct)}}o&&(r.update_pending_count(-1),f.decrement(h))};u.promise.then(v,l=>v(null,l||"unknown"))}),Ms(()=>{for(const u of c.values())u.reject(ct)}),new Promise(u=>{function f(h){function v(){h===i?u(a):f(i)}h.then(v,v)}f(i)})}function We(t){const e=Yt(t);return e.equals=Un,e}function Xn(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ve(e[n])}}function ys(t){for(var e=t.parent;e!==null;){if((e.f&te)===0)return(e.f&Be)===0?e:null;e=e.parent}return null}function fn(t){var e,n=H;Ie(ys(t));try{t.f&=~nt,Xn(t),e=vr(t)}finally{Ie(n)}return e}function Zn(t){var e=fn(t);if(t.equals(e)||(L?.is_fork||(t.v=e),t.wv=dr()),!ot)if(Te!==null)(Pt()||L?.is_fork)&&Te.set(t,e);else{var n=(t.f&Pe)===0?Ce:Q;ee(t,n)}}let nn=new Set;const Ze=new Map;let Jn=!1;function st(t,e){var n={f:0,v:t,reactions:null,equals:qn,rv:0,wv:0};return n}function ze(t,e){const n=st(t);return ks(n),n}function U(t,e=!1,n=!0){const r=st(t);return e||(r.equals=Un),xt&&n&&Y!==null&&Y.l!==null&&(Y.l.s??=[]).push(r),r}function G(t,e){return R(t,y(()=>s(t))),e}function R(t,e,n=!1){I!==null&&(!Oe||(I.f&wn)!==0)&&St()&&(I.f&(te|Ue|cn|wn))!==0&&!qe?.includes(t)&&ss();let r=n?ft(e):e;return yt(t,r)}function yt(t,e){if(!t.equals(e)){var n=t.v;ot?Ze.set(t,e):Ze.set(t,n),t.v=e;var r=Ne.ensure();r.capture(t,n),(t.f&te)!==0&&((t.f&pe)!==0&&fn(t),ee(t,(t.f&Pe)!==0?Q:Ce)),t.wv=dr(),Qn(t,pe),St()&&H!==null&&(H.f&Q)!==0&&(H.f&(Ge|it))===0&&(Se===null?As([t]):Se.push(t)),!r.is_fork&&nn.size>0&&!Jn&&gs()}return e}function gs(){Jn=!1;var t=et;Ft(!0);const e=Array.from(nn);try{for(const n of e)(n.f&Q)!==0&&ee(n,Ce),Et(n)&&bt(n)}finally{Ft(t)}nn.clear()}function Rt(t){R(t,t.v+1)}function Qn(t,e){var n=t.reactions;if(n!==null)for(var r=St(),i=n.length,a=0;a<i;a++){var o=n[a],c=o.f;if(!(!r&&o===H)){var u=(c&pe)===0;if(u&&ee(o,e),(c&te)!==0){var f=o;Te?.delete(f),(c&nt)===0&&(c&Pe&&(o.f|=nt),Qn(f,Ce))}else u&&((c&Ue)!==0&&He!==null&&He.add(o),rt(o))}}}function ft(t){if(typeof t!="object"||t===null||vt in t)return t;const e=ln(t);if(e!==Gr&&e!==Yr)return t;var n=new Map,r=On(t),i=ze(0),a=tt,o=c=>{if(tt===a)return c();var u=I,f=tt;he(null),Dn(a);var h=c();return he(u),Dn(f),h};return r&&n.set("length",ze(t.length)),new Proxy(t,{defineProperty(c,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&ns();var h=n.get(u);return h===void 0?h=o(()=>{var v=ze(f.value);return n.set(u,v),v}):R(h,f.value,!0),!0},deleteProperty(c,u){var f=n.get(u);if(f===void 0){if(u in c){const h=o(()=>ze(ne));n.set(u,h),Rt(i)}}else R(f,ne),Rt(i);return!0},get(c,u,f){if(u===vt)return t;var h=n.get(u),v=u in c;if(h===void 0&&(!v||ht(c,u)?.writable)&&(h=o(()=>{var m=ft(v?c[u]:ne),S=ze(m);return S}),n.set(u,h)),h!==void 0){var l=s(h);return l===ne?void 0:l}return Reflect.get(c,u,f)},getOwnPropertyDescriptor(c,u){var f=Reflect.getOwnPropertyDescriptor(c,u);if(f&&"value"in f){var h=n.get(u);h&&(f.value=s(h))}else if(f===void 0){var v=n.get(u),l=v?.v;if(v!==void 0&&l!==ne)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return f},has(c,u){if(u===vt)return!0;var f=n.get(u),h=f!==void 0&&f.v!==ne||Reflect.has(c,u);if(f!==void 0||H!==null&&(!h||ht(c,u)?.writable)){f===void 0&&(f=o(()=>{var l=h?ft(c[u]):ne,m=ze(l);return m}),n.set(u,f));var v=s(f);if(v===ne)return!1}return h},set(c,u,f,h){var v=n.get(u),l=u in c;if(r&&u==="length")for(var m=f;m<v.v;m+=1){var S=n.get(m+"");S!==void 0?R(S,ne):m in c&&(S=o(()=>ze(ne)),n.set(m+"",S))}if(v===void 0)(!l||ht(c,u)?.writable)&&(v=o(()=>ze(void 0)),R(v,ft(f)),n.set(u,v));else{l=v.v!==ne;var T=o(()=>ft(f));R(v,T)}var p=Reflect.getOwnPropertyDescriptor(c,u);if(p?.set&&p.set.call(h,f),!l){if(r&&typeof u=="string"){var E=n.get("length"),P=Number(u);Number.isInteger(P)&&P>=E.v&&R(E,P+1)}Rt(i)}return!0},ownKeys(c){s(i);var u=Reflect.ownKeys(c).filter(v=>{var l=n.get(v);return l===void 0||l.v!==ne});for(var[f,h]of n)h.v!==ne&&!(f in c)&&u.push(f);return u},setPrototypeOf(){rs()}})}var En,$n,er,tr;function bs(){if(En===void 0){En=window,$n=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;er=ht(e,"firstChild").get,tr=ht(e,"nextSibling").get,xn(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),xn(n)&&(n.__t=void 0)}}function Je(t=""){return document.createTextNode(t)}function gt(t){return er.call(t)}function kt(t){return tr.call(t)}function _(t,e){return gt(t)}function dt(t,e=!1){{var n=gt(t);return n instanceof Comment&&n.data===""?kt(n):n}}function g(t,e=1,n=!1){let r=t;for(;e--;)r=kt(r);return r}function xs(t){t.textContent=""}function nr(){return!1}let Mn=!1;function ws(){Mn||(Mn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function dn(t){var e=I,n=H;he(null),Ie(null);try{return t()}finally{he(e),Ie(n)}}function Ss(t,e,n,r=n){t.addEventListener(e,()=>dn(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),ws()}function rr(t){H===null&&(I===null&&$r(),Qr()),ot&&Jr()}function Es(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Ye(t,e,n){var r=H;r!==null&&(r.f&ge)!==0&&(t|=ge);var i={ctx:Y,deps:null,nodes:null,f:t|pe|Pe,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{bt(i),i.f|=un}catch(c){throw ve(i),c}else e!==null&&rt(i);var a=i;if(n&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&wt)===0&&(a=a.first,(t&Ue)!==0&&(t&pt)!==0&&a!==null&&(a.f|=pt)),a!==null&&(a.parent=r,r!==null&&Es(a,r),I!==null&&(I.f&te)!==0&&(t&it)===0)){var o=I;(o.effects??=[]).push(a)}return i}function Pt(){return I!==null&&!Oe}function Ms(t){const e=Ye(Bt,null,!1);return ee(e,Q),e.teardown=t,e}function rn(t){rr();var e=H.f,n=!I&&(e&Ge)!==0&&(e&un)===0;if(n){var r=Y;(r.e??=[]).push(t)}else return sr(t)}function sr(t){return Ye(jn|Ln,t,!1)}function Ts(t){return rr(),Ye(Bt|Ln,t,!0)}function Ds(t){Ne.ensure();const e=Ye(it|wt,t,!0);return(n={})=>new Promise(r=>{n.outro?$e(e,()=>{ve(e),r(void 0)}):(ve(e),r(void 0))})}function de(t,e){var n=Y,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=zt(()=>{t(),!r.ran&&(r.ran=!0,y(e))})}function at(){var t=Y;zt(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&Q)!==0&&ee(n,Ce),Et(n)&&bt(n),e.ran=!1}})}function Rs(t){return Ye(cn|wt,t,!0)}function zt(t,e=0){return Ye(Bt|e,t,!0)}function Z(t,e=[],n=[],r=[]){ps(r,e,n,i=>{Ye(Bt,()=>t(...i.map(s)),!0)})}function Kt(t,e=0){var n=Ye(Ue|e,t,!0);return n}function Me(t){return Ye(Ge|wt,t,!0)}function ir(t){var e=t.teardown;if(e!==null){const n=ot,r=I;Tn(!0),he(null);try{e.call(null)}finally{Tn(n),he(r)}}}function ar(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&dn(()=>{i.abort(ct)});var r=n.next;(n.f&it)!==0?n.parent=null:ve(n,e),n=r}}function Ps(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Ge)===0&&ve(e),e=n}}function ve(t,e=!0){var n=!1;(e||(t.f&Hn)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Cs(t.nodes.start,t.nodes.end),n=!0),ar(t,e&&!n),jt(t,0),ee(t,Be);var r=t.nodes&&t.nodes.t;if(r!==null)for(const a of r)a.stop();ir(t);var i=t.parent;i!==null&&i.first!==null&&or(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Cs(t,e){for(;t!==null;){var n=t===e?null:kt(t);t.remove(),t=n}}function or(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function $e(t,e,n=!0){var r=[];lr(t,r,!0);var i=()=>{n&&ve(t),e&&e()},a=r.length;if(a>0){var o=()=>--a||i();for(var c of r)c.out(o)}else i()}function lr(t,e,n){if((t.f&ge)===0){t.f^=ge;var r=t.nodes&&t.nodes.t;if(r!==null)for(const c of r)(c.is_global||n)&&e.push(c);for(var i=t.first;i!==null;){var a=i.next,o=(i.f&pt)!==0||(i.f&Ge)!==0&&(t.f&Ue)!==0;lr(i,e,o?n:!1),i=a}}}function hn(t){ur(t,!0)}function ur(t,e){if((t.f&ge)!==0){t.f^=ge,(t.f&Q)===0&&(ee(t,pe),rt(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&pt)!==0||(n.f&Ge)!==0;ur(n,i?e:!1),n=r}var a=t.nodes&&t.nodes.t;if(a!==null)for(const o of a)(o.is_global||e)&&o.in()}}function cr(t,e){if(t.nodes)for(var n=t.nodes.start,r=t.nodes.end;n!==null;){var i=n===r?null:kt(n);e.append(n),n=i}}let et=!1;function Ft(t){et=t}let ot=!1;function Tn(t){ot=t}let I=null,Oe=!1;function he(t){I=t}let H=null;function Ie(t){H=t}let qe=null;function ks(t){I!==null&&(qe===null?qe=[t]:qe.push(t))}let se=null,ye=0,Se=null;function As(t){Se=t}let fr=1,Ct=0,tt=Ct;function Dn(t){tt=t}function dr(){return++fr}function Et(t){var e=t.f;if((e&pe)!==0)return!0;if(e&te&&(t.f&=~nt),(e&Ce)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var a=n[i];if(Et(a)&&Zn(a),a.wv>t.wv)return!0}(e&Pe)!==0&&Te===null&&ee(t,Q)}return!1}function hr(t,e,n=!0){var r=t.reactions;if(r!==null&&!qe?.includes(t))for(var i=0;i<r.length;i++){var a=r[i];(a.f&te)!==0?hr(a,e,!1):e===a&&(n?ee(a,pe):(a.f&Q)!==0&&ee(a,Ce),rt(a))}}function vr(t){var e=se,n=ye,r=Se,i=I,a=qe,o=Y,c=Oe,u=tt,f=t.f;se=null,ye=0,Se=null,I=(f&(Ge|it))===0?t:null,qe=null,mt(t.ctx),Oe=!1,tt=++Ct,t.ac!==null&&(dn(()=>{t.ac.abort(ct)}),t.ac=null);try{t.f|=en;var h=t.fn,v=h(),l=t.deps;if(se!==null){var m;if(jt(t,ye),l!==null&&ye>0)for(l.length=ye+se.length,m=0;m<se.length;m++)l[ye+m]=se[m];else t.deps=l=se;if(Pt()&&(t.f&Pe)!==0)for(m=ye;m<l.length;m++)(l[m].reactions??=[]).push(t)}else l!==null&&ye<l.length&&(jt(t,ye),l.length=ye);if(St()&&Se!==null&&!Oe&&l!==null&&(t.f&(te|Ce|pe))===0)for(m=0;m<Se.length;m++)hr(Se[m],t);return i!==null&&i!==t&&(Ct++,Se!==null&&(r===null?r=Se:r.push(...Se))),(t.f&Xe)!==0&&(t.f^=Xe),v}catch(S){return Yn(S)}finally{t.f^=en,se=e,ye=n,Se=r,I=i,qe=a,mt(o),Oe=c,tt=u}}function Vs(t,e){let n=e.reactions;if(n!==null){var r=qr.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&te)!==0&&(se===null||!se.includes(e))&&(ee(e,Ce),(e.f&Pe)!==0&&(e.f^=Pe,e.f&=~nt),Xn(e),jt(e,0))}function jt(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Vs(t,n[r])}function bt(t){var e=t.f;if((e&Be)===0){ee(t,Q);var n=H,r=et;H=t,et=!0;try{(e&(Ue|Kr))!==0?Ps(t):ar(t),ir(t);var i=vr(t);t.teardown=typeof i=="function"?i:null,t.wv=fr;var a;Qt&&Rr&&(t.f&pe)!==0&&t.deps}finally{et=r,H=n}}}async function Ns(){await Promise.resolve(),us()}function s(t){var e=t.f,n=(e&te)!==0;if(I!==null&&!Oe){var r=H!==null&&(H.f&Be)!==0;if(!r&&!qe?.includes(t)){var i=I.deps;if((I.f&en)!==0)t.rv<Ct&&(t.rv=Ct,se===null&&i!==null&&i[ye]===t?ye++:se===null?se=[t]:se.includes(t)||se.push(t));else{(I.deps??=[]).push(t);var a=t.reactions;a===null?t.reactions=[I]:a.includes(I)||a.push(I)}}}if(ot){if(Ze.has(t))return Ze.get(t);if(n){var o=t,c=o.v;return((o.f&Q)===0&&o.reactions!==null||mr(o))&&(c=fn(o)),Ze.set(o,c),c}}else n&&(!Te?.has(t)||L?.is_fork&&!Pt())&&(o=t,Et(o)&&Zn(o),et&&Pt()&&(o.f&Pe)===0&&pr(o));if(Te?.has(t))return Te.get(t);if((t.f&Xe)!==0)throw t.v;return t.v}function pr(t){if(t.deps!==null){t.f^=Pe;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&te)!==0&&(e.f&Pe)===0&&pr(e)}}function mr(t){if(t.v===ne)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Ze.has(e)||(e.f&te)!==0&&mr(e))return!0;return!1}function y(t){var e=Oe;try{return Oe=!0,t()}finally{Oe=e}}const Os=-7169;function ee(t,e){t.f=t.f&Os|e}function b(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(vt in t)sn(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&vt in n&&sn(n)}}}function sn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{sn(t[r],e)}catch{}const n=ln(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=In(n);for(let i in r){const a=r[i].get;if(a)try{a.call(t)}catch{}}}}}const _r=new Set,an=new Set;function Mt(t){for(var e=0;e<t.length;e++)_r.add(t[e]);for(var n of an)n(t)}let Rn=null;function Vt(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],a=i[0]||t.target;Rn=t;var o=0,c=Rn===t&&t.__root;if(c){var u=i.indexOf(c);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var f=i.indexOf(e);if(f===-1)return;u<=f&&(o=u)}if(a=i[o]||t.target,a!==e){Ur(t,"currentTarget",{configurable:!0,get(){return a||n}});var h=I,v=H;he(null),Ie(null);try{for(var l,m=[];a!==null;){var S=a.assignedSlot||a.parentNode||a.host||null;try{var T=a["__"+r];T!=null&&(!a.disabled||t.target===a)&&T.call(a,t)}catch(p){l?m.push(p):l=p}if(t.cancelBubble||S===e||S===null)break;a=S}if(l){for(let p of m)queueMicrotask(()=>{throw p});throw l}}finally{t.__root=e,delete t.currentTarget,he(h),Ie(v)}}}function yr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ht(t,e){var n=H;n.nodes===null&&(n.nodes={start:t,end:e,a:null,t:null})}function K(t,e){var n=(e&Hr)!==0,r=(e&Lr)!==0,i,a=!t.startsWith("<!>");return()=>{i===void 0&&(i=yr(a?t:"<!>"+t),n||(i=gt(i)));var o=r||$n?document.importNode(i,!0):i.cloneNode(!0);if(n){var c=gt(o),u=o.lastChild;Ht(c,u)}else Ht(o,o);return o}}function Is(t,e,n="svg"){var r=!t.startsWith("<!>"),i=`<${n}>${r?t:"<!>"+t}</${n}>`,a;return()=>{if(!a){var o=yr(i),c=gt(o);a=gt(c)}var u=a.cloneNode(!0);return Ht(u,u),u}}function vn(t,e){return Is(t,e,"svg")}function pn(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Je();return t.append(e,n),Ht(e,n),t}function q(t,e){t!==null&&t.before(e)}const Fs=["touchstart","touchmove"];function js(t){return Fs.includes(t)}function N(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Hs(t,e){return Ls(t,e)}const ut=new Map;function Ls(t,{target:e,anchor:n,props:r={},events:i,context:a,intro:o=!0}){bs();var c=new Set,u=v=>{for(var l=0;l<v.length;l++){var m=v[l];if(!c.has(m)){c.add(m);var S=js(m);e.addEventListener(m,Vt,{passive:S});var T=ut.get(m);T===void 0?(document.addEventListener(m,Vt,{passive:S}),ut.set(m,1)):ut.set(m,T+1)}}};u(Lt(_r)),an.add(u);var f=void 0,h=Ds(()=>{var v=n??e.appendChild(Je());return hs(v,{pending:()=>{}},l=>{if(a){ke({});var m=Y;m.c=a}i&&(r.$$events=i),f=t(l,r)||{},a&&Ae()}),()=>{for(var l of c){e.removeEventListener(l,Vt);var m=ut.get(l);--m===0?(document.removeEventListener(l,Vt),ut.delete(l)):ut.set(l,m)}an.delete(u),v!==n&&v.parentNode?.removeChild(v)}});return Bs.set(f,h),f}let Bs=new WeakMap;class gr{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(e,n=!0){this.anchor=e,this.#l=n}#i=()=>{var e=L;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)hn(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#t.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[a,o]of this.#e){if(this.#e.delete(a),a===e)break;const c=this.#r.get(o);c&&(ve(c.effect),this.#r.delete(o))}for(const[a,o]of this.#t){if(a===n||this.#n.has(a))continue;const c=()=>{if(Array.from(this.#e.values()).includes(a)){var f=document.createDocumentFragment();cr(o,f),f.append(Je()),this.#r.set(a,{effect:o,fragment:f})}else ve(o);this.#n.delete(a),this.#t.delete(a)};this.#l||!r?(this.#n.add(a),$e(o,c,!1)):c()}}};#s=e=>{this.#e.delete(e);const n=Array.from(this.#e.values());for(const[r,i]of this.#r)n.includes(r)||(ve(i.effect),this.#r.delete(r))};ensure(e,n){var r=L,i=nr();if(n&&!this.#t.has(e)&&!this.#r.has(e))if(i){var a=document.createDocumentFragment(),o=Je();a.append(o),this.#r.set(e,{effect:Me(()=>n(o)),fragment:a})}else this.#t.set(e,Me(()=>n(this.anchor)));if(this.#e.set(r,e),i){for(const[c,u]of this.#t)c===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[c,u]of this.#r)c===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#i),r.ondiscard(this.#s)}else this.#i()}}function br(t){Y===null&&Bn(),xt&&Y.l!==null?Us(Y).m.push(t):rn(()=>{const e=y(t);if(typeof e=="function")return e})}function qs(t){Y===null&&Bn(),br(()=>()=>y(t))}function Us(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}function ie(t,e,n=!1){var r=new gr(t),i=n?pt:0;function a(o,c){r.ensure(o,c)}Kt(()=>{var o=!1;e((c,u=!0)=>{o=!0,a(u,c)}),o||a(!1,null)},i)}function Gs(t,e,n){var r=new gr(t),i=!St();Kt(()=>{var a=e();i&&a!==null&&typeof a=="object"&&(a={}),r.ensure(a,n)})}function mn(t,e){return e}function Ys(t,e,n){for(var r=[],i=e.length,a,o=e.length,c=0;c<i;c++){let v=e[c];$e(v,()=>{if(a){if(a.pending.delete(v),a.done.add(v),a.pending.size===0){var l=t.outrogroups;on(Lt(a.done)),l.delete(a),l.size===0&&(t.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=r.length===0&&n!==null;if(u){var f=n,h=f.parentNode;xs(h),h.append(f),t.items.clear()}on(e,!u)}else a={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(a)}function on(t,e=!0){for(var n=0;n<t.length;n++)ve(t[n],e)}var Pn;function _n(t,e,n,r,i,a=null){var o=t,c=new Map,u=(e&Nn)!==0;if(u){var f=t;o=f.appendChild(Je())}var h=null,v=We(()=>{var E=n();return On(E)?E:E==null?[]:Lt(E)}),l,m=!0;function S(){p.fallback=h,zs(p,l,o,e,r),h!==null&&(l.length===0?(h.f&Le)===0?hn(h):(h.f^=Le,Tt(h,null,o)):$e(h,()=>{h=null}))}var T=Kt(()=>{l=s(v);for(var E=l.length,P=new Set,x=L,D=nr(),C=0;C<E;C+=1){var F=l[C],d=r(F,C),M=m?null:c.get(d);M?(M.v&&yt(M.v,F),M.i&&yt(M.i,C),D&&x.skipped_effects.delete(M.e)):(M=Ks(c,m?o:Pn??=Je(),F,d,C,i,e,n),m||(M.e.f|=Le),c.set(d,M)),P.add(d)}if(E===0&&a&&!h&&(m?h=Me(()=>a(o)):(h=Me(()=>a(Pn??=Je())),h.f|=Le)),!m)if(D){for(const[V,O]of c)P.has(V)||x.skipped_effects.add(O.e);x.oncommit(S),x.ondiscard(()=>{})}else S();s(v)}),p={effect:T,items:c,outrogroups:null,fallback:h};m=!1}function zs(t,e,n,r,i){var a=(r&Ar)!==0,o=e.length,c=t.items,u=t.effect.first,f,h=null,v,l=[],m=[],S,T,p,E;if(a)for(E=0;E<o;E+=1)S=e[E],T=i(S,E),p=c.get(T).e,(p.f&Le)===0&&(p.nodes?.a?.measure(),(v??=new Set).add(p));for(E=0;E<o;E+=1){if(S=e[E],T=i(S,E),p=c.get(T).e,t.outrogroups!==null)for(const O of t.outrogroups)O.pending.delete(p),O.done.delete(p);if((p.f&Le)!==0)if(p.f^=Le,p===u)Tt(p,null,n);else{var P=h?h.next:u;p===t.effect.last&&(t.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Ke(t,h,p),Ke(t,p,P),Tt(p,P,n),h=p,l=[],m=[],u=h.next;continue}if((p.f&ge)!==0&&(hn(p),a&&(p.nodes?.a?.unfix(),(v??=new Set).delete(p))),p!==u){if(f!==void 0&&f.has(p)){if(l.length<m.length){var x=m[0],D;h=x.prev;var C=l[0],F=l[l.length-1];for(D=0;D<l.length;D+=1)Tt(l[D],x,n);for(D=0;D<m.length;D+=1)f.delete(m[D]);Ke(t,C.prev,F.next),Ke(t,h,C),Ke(t,F,x),u=x,h=F,E-=1,l=[],m=[]}else f.delete(p),Tt(p,u,n),Ke(t,p.prev,p.next),Ke(t,p,h===null?t.effect.first:h.next),Ke(t,h,p),h=p;continue}for(l=[],m=[];u!==null&&u!==p;)(f??=new Set).add(u),m.push(u),u=u.next;if(u===null)continue}(p.f&Le)===0&&l.push(p),h=p,u=p.next}if(t.outrogroups!==null){for(const O of t.outrogroups)O.pending.size===0&&(on(Lt(O.done)),t.outrogroups?.delete(O));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||f!==void 0){var d=[];if(f!==void 0)for(p of f)(p.f&ge)===0&&d.push(p);for(;u!==null;)(u.f&ge)===0&&u!==t.fallback&&d.push(u),u=u.next;var M=d.length;if(M>0){var V=(r&Nn)!==0&&o===0?n:null;if(a){for(E=0;E<M;E+=1)d[E].nodes?.a?.measure();for(E=0;E<M;E+=1)d[E].nodes?.a?.fix()}Ys(t,d,V)}}a&&Ut(()=>{if(v!==void 0)for(p of v)p.nodes?.a?.apply()})}function Ks(t,e,n,r,i,a,o,c){var u=(o&Cr)!==0?(o&Vr)===0?U(n,!1,!1):st(n):null,f=(o&kr)!==0?st(i):null;return{v:u,i:f,e:Me(()=>(a(e,u??n,f??i,c),()=>{t.delete(r)}))}}function Tt(t,e,n){if(t.nodes)for(var r=t.nodes.start,i=t.nodes.end,a=e&&(e.f&Le)===0?e.nodes.start:n;r!==null;){var o=kt(r);if(a.before(r),r===i)return;r=o}}function Ke(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}const Cn=[...` 	
\r\fÂ \v\uFEFF`];function Ws(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var a=i.length,o=0;(o=r.indexOf(i,o))>=0;){var c=o+a;(o===0||Cn.includes(r[o-1]))&&(c===r.length||Cn.includes(r[c]))?r=(o===0?"":r.substring(0,o))+r.substring(c+1):o=c}}return r===""?null:r}function Xs(t,e){return t==null?null:String(t)}function $(t,e,n,r,i,a){var o=t.__className;if(o!==n||o===void 0){var c=Ws(n,r,a);c==null?t.removeAttribute("class"):e?t.className=c:t.setAttribute("class",c),t.__className=n}else if(a&&i!==a)for(var u in a){var f=!!a[u];(i==null||f!==!!i[u])&&t.classList.toggle(u,f)}return a}function Zs(t,e,n,r){var i=t.__style;if(i!==e){var a=Xs(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return r}const Js=Symbol("is custom element"),Qs=Symbol("is html");function fe(t,e,n,r){var i=$s(t);i[e]!==(i[e]=n)&&(e==="loading"&&(t[Xr]=n),n==null?t.removeAttribute(e):typeof n!="string"&&ei(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function $s(t){return t.__attributes??={[Js]:t.nodeName.includes("-"),[Qs]:t.namespaceURI===Br}}var kn=new Map;function ei(t){var e=t.getAttribute("is")||t.nodeName,n=kn.get(e);if(n)return n;kn.set(e,n=[]);for(var r,i=t,a=Element.prototype;a!==i;){r=In(i);for(var o in r)r[o].set&&n.push(o);i=ln(i)}return n}function X(t,e,n=e){var r=new WeakSet;Ss(t,"input",async i=>{var a=i?t.defaultValue:t.value;if(a=Zt(t)?Jt(a):a,n(a),L!==null&&r.add(L),await Ns(),a!==(a=e())){var o=t.selectionStart,c=t.selectionEnd,u=t.value.length;if(t.value=a??"",c!==null){var f=t.value.length;o===c&&c===u&&f>u?(t.selectionStart=f,t.selectionEnd=f):(t.selectionStart=o,t.selectionEnd=Math.min(c,f))}}}),y(e)==null&&t.value&&(n(Zt(t)?Jt(t.value):t.value),L!==null&&r.add(L)),zt(()=>{var i=e();if(t===document.activeElement){var a=Ot??L;if(r.has(a))return}Zt(t)&&i===Jt(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Zt(t){var e=t.type;return e==="number"||e==="range"}function Jt(t){return t===""?null:+t}function Fe(t=!1){const e=Y,n=e.l.u;if(!n)return;let r=()=>b(e.s);if(t){let i=0,a={};const o=Yt(()=>{let c=!1;const u=e.s;for(const f in u)u[f]!==a[f]&&(a[f]=u[f],c=!0);return c&&i++,i});r=()=>s(o)}n.b.length&&Ts(()=>{An(e,r),$t(n.b)}),rn(()=>{const i=y(()=>n.m.map(zr));return()=>{for(const a of i)typeof a=="function"&&a()}}),n.a.length&&rn(()=>{An(e,r),$t(n.a)})}function An(t,e){if(t.l.s)for(const n of t.l.s)s(n);e()}let Nt=!1;function ti(t){var e=Nt;try{return Nt=!1,[t(),Nt]}finally{Nt=e}}function w(t,e,n,r){var i=!xt||(n&Or)!==0,a=(n&Fr)!==0,o=(n&jr)!==0,c=r,u=!0,f=()=>(u&&(u=!1,c=o?y(r):r),c),h;if(a){var v=vt in t||Wr in t;h=ht(t,e)?.set??(v&&e in t?x=>t[e]=x:void 0)}var l,m=!1;a?[l,m]=ti(()=>t[e]):l=t[e],l===void 0&&r!==void 0&&(l=f(),h&&(i&&ts(),h(l)));var S;if(i?S=()=>{var x=t[e];return x===void 0?f():(u=!0,x)}:S=()=>{var x=t[e];return x!==void 0&&(c=void 0),x===void 0?c:x},i&&(n&Ir)===0)return S;if(h){var T=t.$$legacy;return(function(x,D){return arguments.length>0?((!i||!D||T||m)&&h(D?S():x),x):S()})}var p=!1,E=((n&Nr)!==0?Yt:We)(()=>(p=!1,S()));a&&s(E);var P=H;return(function(x,D){if(arguments.length>0){const C=D?s(E):i&&a?ft(x):x;return R(E,C),p=!0,c!==void 0&&(c=C),x}return ot&&p||(P.f&Be)!==0?E.v:s(E)})}function xr(){return{audioBackend:"odin2",currentChord:"I",currentMeasure:1,currentStep:0,isMinorChord:!1,progressionName:"",progressionLength:4,harmonyMode:1,primarySteps:16,primaryPulses:4,primaryRotation:0,primaryPattern:[],secondarySteps:12,secondaryPulses:3,secondaryRotation:0,secondaryPattern:[],isEmotionMode:!0,arousal:.5,valence:.3,density:.5,tension:.3,bpm:120,rhythmMode:0,enableRhythm:!0,enableHarmony:!0,enableMelody:!0,enableVoicing:!1,rhythmDensity:.5,rhythmTension:.3,harmonyTension:.3,harmonyValence:.3,melodySmoothness:.7,voicingDensity:.5,voicingTension:.3,channelMuted:[!1,!1,!1,!1],channelGains:[.6,1,.5,.4],key:"C",scale:"major"}}class ni{currentState;subscribers=new Set;constructor(e){this.currentState=e}updateState(e){this.currentState={...this.currentState,...e},this.notifySubscribers()}notifySubscribers(){this.subscribers.forEach(e=>e(this.currentState))}useEmotionMode(){this.sendCommand("use_emotion_mode"),this.updateState({isEmotionMode:!0})}useDirectMode(){this.sendCommand("use_direct_mode"),this.updateState({isEmotionMode:!1})}setArousal(e){this.sendCommand("set_arousal",e),this.currentState.arousal=e}setValence(e){this.sendCommand("set_valence",e),this.currentState.valence=e}setDensity(e){this.sendCommand("set_density",e),this.currentState.density=e}setTension(e){this.sendCommand("set_tension",e),this.currentState.tension=e}setAlgorithm(e){this.sendCommand("set_algorithm",e)}setHarmonyMode(e){this.sendCommand("set_harmony_mode",e)}setPolySteps(e){this.sendCommand("set_poly_steps",e)}setDirectBpm(e){this.sendCommand("set_direct_bpm",e)}setDirectEnableRhythm(e){this.sendCommand("set_direct_enable_rhythm",e)}setDirectEnableHarmony(e){this.sendCommand("set_direct_enable_harmony",e)}setDirectEnableMelody(e){this.sendCommand("set_direct_enable_melody",e)}setDirectEnableVoicing(e){this.sendCommand("set_direct_enable_voicing",e)}setDirectRhythmMode(e){this.sendCommand("set_direct_rhythm_mode",e)}setDirectRhythmSteps(e){this.sendCommand("set_direct_rhythm_steps",e)}setDirectRhythmPulses(e){this.sendCommand("set_direct_rhythm_pulses",e)}setDirectRhythmRotation(e){this.sendCommand("set_direct_rhythm_rotation",e)}setDirectRhythmDensity(e){this.sendCommand("set_direct_rhythm_density",e)}setDirectRhythmTension(e){this.sendCommand("set_direct_rhythm_tension",e)}setDirectSecondarySteps(e){this.sendCommand("set_direct_secondary_steps",e)}setDirectSecondaryPulses(e){this.sendCommand("set_direct_secondary_pulses",e)}setDirectSecondaryRotation(e){this.sendCommand("set_direct_secondary_rotation",e)}setDirectHarmonyTension(e){this.sendCommand("set_direct_harmony_tension",e)}setDirectHarmonyValence(e){this.sendCommand("set_direct_harmony_valence",e)}setDirectMelodySmoothness(e){this.sendCommand("set_direct_melody_smoothness",e)}setDirectVoicingDensity(e){this.sendCommand("set_direct_voicing_density",e)}setDirectVoicingTension(e){this.sendCommand("set_direct_voicing_tension",e)}setChannelMuted(e,n){this.sendCommand("set_channel_muted",e,n),this.currentState.channelMuted[e]=n}setChannelRouting(e,n){this.sendCommand("set_channel_routing",e,n)}setChannelGain(e,n){this.currentState.channelGains[e]=n,this.sendCommand("set_channel_gain",e,n)}subscribe(e){return this.subscribers.add(e),e(this.currentState),()=>{this.subscribers.delete(e)}}getState(){return{...this.currentState}}}class ri extends ni{connected=!1;previousOnPluginMessage;constructor(){super(xr())}async connect(e,n){this.previousOnPluginMessage=window.onPluginMessage,window.onPluginMessage=r=>{this.handleMessage(r),this.previousOnPluginMessage&&this.previousOnPluginMessage(r)},this.connected=!0,this.currentState.audioBackend="fundsp",this.postMessage({type:"action",method:"init"})}getAvailableBackends(){return["fundsp"]}disconnect(){window.onPluginMessage=this.previousOnPluginMessage,this.connected=!1}isConnected(){return this.connected}sendCommand(e,...n){const r={};n.length===1?e.includes("enable")?r.enabled=n[0]:e.includes("steps")?r.steps=n[0]:e.includes("pulses")?r.pulses=n[0]:e.includes("rotation")?r.rotation=n[0]:e.includes("mode")?r.mode=n[0]:e.includes("channel")?r.channel=n[0]:r.value=n[0]:n.length===2&&(r.channel=n[0],e.includes("muted")?r.muted=n[1]:e.includes("routing")?r.routing=n[1]:e.includes("gain")?r.gain=n[1]:r.value=n[1]);const i={type:e.includes("use_")?"action":"set",method:e,params:r};this.postMessage(i)}handleMessage=e=>{try{const n=e;if(n.type==="state_update"&&n.data){const r=n;this.currentState={...this.currentState,...r.data},this.subscribers.forEach(i=>i(this.currentState))}}catch(n){console.error("[VstBridge] Error handling message:",n,e)}};postMessage(e){window.sendToPlugin?window.sendToPlugin(e):window.ipc?.postMessage?window.ipc.postMessage(JSON.stringify(e)):console.warn("[VstBridge] No IPC available, message not sent:",e)}}var si=K('<div class="emotional-controls space-y-6"><div class="p-5 bg-neutral-900 rounded-lg border-l-4 border-purple-600"><div class="flex justify-between items-center"><span class="text-xl font-semibold">BPM</span> <span class="text-4xl font-mono text-purple-400"> </span></div> <p class="text-sm text-neutral-500 mt-2">Calculated from Arousal</p></div> <div class="py-2"><div class="flex justify-between mb-3"><label for="arousal" class="text-xl font-semibold">Arousal</label> <span class="text-lg text-purple-400 font-mono"> </span></div> <input id="arousal" type="range" min="0" max="1" step="0.01" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-red-600"/> <div class="text-sm text-neutral-500 mt-2 text-right">Energy / Tempo</div></div> <div class="py-2"><div class="flex justify-between mb-3"><label for="valence" class="text-xl font-semibold">Valence</label> <span class="text-lg text-purple-400 font-mono"> </span></div> <input id="valence" type="range" min="-1" max="1" step="0.01" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-600"/> <div class="text-sm text-neutral-500 mt-2 text-right">Emotion / Harmony</div></div> <div class="py-2"><div class="flex justify-between mb-3"><label for="density" class="text-xl font-semibold">Density</label> <span class="text-lg text-purple-400 font-mono"> </span></div> <input id="density" type="range" min="0" max="1" step="0.01" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-blue-600"/> <div class="text-sm text-neutral-500 mt-2 text-right">Rhythm Complexity</div></div> <div class="py-2"><div class="flex justify-between mb-3"><label for="tension" class="text-xl font-semibold">Tension</label> <span class="text-lg text-purple-400 font-mono"> </span></div> <input id="tension" type="range" min="0" max="1" step="0.01" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-yellow-600"/> <div class="text-sm text-neutral-500 mt-2 text-right">Dissonance / Rotation</div></div></div>');function ii(t,e){ke(e,!1);const n=U();let r=w(e,"bridge",8),i=w(e,"arousal",8,.5),a=w(e,"valence",8,.3),o=w(e,"density",8,.5),c=w(e,"tension",8,.3),u=U(i()),f=U(a()),h=U(o()),v=U(c()),l=U(null),m=null;function S(z){R(l,z),m&&clearTimeout(m),m=setTimeout(()=>{R(l,null)},500)}function T(){S("arousal"),r().setArousal(s(u))}function p(){S("valence"),r().setValence(s(f))}function E(){S("density"),r().setDensity(s(h))}function P(){S("tension"),r().setTension(s(v))}de(()=>(s(l),b(i())),()=>{s(l)!=="arousal"&&R(u,i())}),de(()=>(s(l),b(a())),()=>{s(l)!=="valence"&&R(f,a())}),de(()=>(s(l),b(o())),()=>{s(l)!=="density"&&R(h,o())}),de(()=>(s(l),b(c())),()=>{s(l)!=="tension"&&R(v,c())}),de(()=>s(u),()=>{R(n,70+s(u)*110)}),at(),Fe();var x=si(),D=_(x),C=_(D),F=g(_(C),2),d=_(F),M=g(D,2),V=_(M),O=g(_(V),2),A=_(O),k=g(V,2);k.__input=T;var j=g(M,2),W=_(j),be=g(_(W),2),J=_(be),ae=g(W,2);ae.__input=p;var oe=g(j,2),me=_(oe),xe=g(_(me),2),De=_(xe),le=g(me,2);le.__input=E;var je=g(oe,2),ue=_(je),Ve=g(_(ue),2),_e=_(Ve),re=g(ue,2);re.__input=P,Z((z,ce,we,B,lt)=>{N(d,z),N(A,ce),N(J,we),N(De,B),N(_e,lt)},[()=>(s(n),y(()=>s(n).toFixed(0))),()=>(s(u),y(()=>s(u).toFixed(2))),()=>(s(f),y(()=>s(f).toFixed(2))),()=>(s(h),y(()=>s(h).toFixed(2))),()=>(s(v),y(()=>s(v).toFixed(2)))]),X(k,()=>s(u),z=>R(u,z)),X(ae,()=>s(f),z=>R(f,z)),X(le,()=>s(h),z=>R(h,z)),X(re,()=>s(v),z=>R(v,z)),q(t,x),Ae()}Mt(["input"]);var ai=K('<p class="text-xs text-neutral-500 mb-4">Bjorklund algorithm - Classic polyrhythms</p> <div class="mb-4 p-3 bg-neutral-800/50 rounded-lg"><div class="text-xs text-orange-300 font-semibold mb-2">Primary (Kick)</div> <div class="grid grid-cols-3 gap-3"><div><span class="text-xs text-neutral-400"> </span> <input type="range" min="4" max="32" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-orange-500"/></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="1" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-orange-500"/></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-orange-500"/></div></div></div> <div class="p-3 bg-neutral-800/50 rounded-lg border border-green-500/30"><div class="text-xs text-green-300 font-semibold mb-2">Secondary (Snare) - Polyrhythm</div> <div class="grid grid-cols-3 gap-3"><div><span class="text-xs text-neutral-400"> </span> <input type="range" min="4" max="32" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="1" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/></div></div> <p class="text-xs text-neutral-600 mt-2"> </p></div>',1),oi=K("<button> </button>"),li=K('<p class="text-xs text-neutral-500 mb-4">XronoMorph style - Regular polygons</p> <div class="mb-4"><span class="text-xs text-neutral-400 mb-2 block">Resolution (steps per measure)</span> <div class="flex gap-2"></div></div> <div class="grid grid-cols-2 gap-4"><div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-purple-500"/> <div class="flex justify-between text-xs text-neutral-600 mt-1"><span>Sparse</span> <span>Dense</span></div></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-purple-500"/> <div class="flex justify-between text-xs text-neutral-600 mt-1"><span>Simple</span> <span>Complex</span></div></div></div>',1),ui=K('<p class="text-xs text-neutral-500 mb-4">Realistic drum patterns - Ghost notes & grooves</p> <div class="grid grid-cols-2 gap-4"><div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-teal-500"/> <div class="flex justify-between text-xs text-neutral-600 mt-1"><span>Half-time</span> <span>Breakbeat</span></div></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-teal-500"/> <div class="flex justify-between text-xs text-neutral-600 mt-1"><span>Clean</span> <span>Ghost notes</span></div></div></div>',1),ci=K('<div class="p-5 bg-neutral-900/50 rounded-lg border-l-4 border-orange-500"><h3 class="text-lg font-semibold text-orange-400 mb-4">Rhythm</h3> <div class="flex rounded-lg bg-neutral-800 p-1.5 mb-5"><button>Euclidean</button> <button>PerfectBalance</button> <button>ClassicGroove</button></div> <!></div>');function fi(t,e){ke(e,!1);let n=w(e,"bridge",8),r=w(e,"rhythmMode",8),i=w(e,"rhythmSteps",8),a=w(e,"rhythmPulses",8),o=w(e,"rhythmRotation",8),c=w(e,"rhythmDensity",8),u=w(e,"rhythmTension",8),f=w(e,"secondarySteps",8),h=w(e,"secondaryPulses",8),v=w(e,"secondaryRotation",8),l=U({rhythmMode:r(),rhythmSteps:i(),rhythmPulses:a(),rhythmRotation:o(),rhythmDensity:c(),rhythmTension:u(),secondarySteps:f(),secondaryPulses:h(),secondaryRotation:v()}),m=U(!1),S=null;function T(){R(m,!0),S&&clearTimeout(S),S=setTimeout(()=>{R(m,!1)},500)}function p(){T(),n().setDirectRhythmMode(s(l).rhythmMode),n().setDirectRhythmSteps(s(l).rhythmSteps),n().setDirectRhythmPulses(s(l).rhythmPulses),n().setDirectRhythmRotation(s(l).rhythmRotation),n().setDirectRhythmDensity(s(l).rhythmDensity),n().setDirectRhythmTension(s(l).rhythmTension),n().setDirectSecondarySteps(s(l).secondarySteps),n().setDirectSecondaryPulses(s(l).secondaryPulses),n().setDirectSecondaryRotation(s(l).secondaryRotation)}function E(A){T(),G(l,s(l).rhythmMode=A),G(l,s(l).rhythmSteps=A===1?48:16),p()}function P(A){T(),G(l,s(l).rhythmSteps=A),p()}de(()=>(s(m),b(r()),b(i()),b(a()),b(o()),b(c()),b(u()),b(f()),b(h()),b(v())),()=>{s(m)||R(l,{rhythmMode:r(),rhythmSteps:i(),rhythmPulses:a(),rhythmRotation:o(),rhythmDensity:c(),rhythmTension:u(),secondarySteps:f(),secondaryPulses:h(),secondaryRotation:v()})}),at(),Fe();var x=ci(),D=g(_(x),2),C=_(D);C.__click=()=>E(0);var F=g(C,2);F.__click=()=>E(1);var d=g(F,2);d.__click=()=>E(2);var M=g(D,2);{var V=A=>{var k=ai(),j=g(dt(k),2),W=g(_(j),2),be=_(W),J=_(be),ae=_(J),oe=g(J,2);oe.__input=p;var me=g(be,2),xe=_(me),De=_(xe),le=g(xe,2);le.__input=p;var je=g(me,2),ue=_(je),Ve=_(ue),_e=g(ue,2);_e.__input=p;var re=g(j,2),z=g(_(re),2),ce=_(z),we=_(ce),B=_(we),lt=g(we,2);lt.__input=p;var yn=g(ce,2),gn=_(yn),wr=_(gn),Wt=g(gn,2);Wt.__input=p;var Sr=g(yn,2),bn=_(Sr),Er=_(bn),Xt=g(bn,2);Xt.__input=p;var Mr=g(z,2),Tr=_(Mr);Z(()=>{N(ae,`Steps: ${s(l),y(()=>s(l).rhythmSteps)??""}`),N(De,`Pulses: ${s(l),y(()=>s(l).rhythmPulses)??""}`),fe(le,"max",(s(l),y(()=>s(l).rhythmSteps))),N(Ve,`Rotation: ${s(l),y(()=>s(l).rhythmRotation)??""}`),fe(_e,"max",(s(l),y(()=>s(l).rhythmSteps-1))),N(B,`Steps: ${s(l),y(()=>s(l).secondarySteps)??""}`),N(wr,`Pulses: ${s(l),y(()=>s(l).secondaryPulses)??""}`),fe(Wt,"max",(s(l),y(()=>s(l).secondarySteps))),N(Er,`Rotation: ${s(l),y(()=>s(l).secondaryRotation)??""}`),fe(Xt,"max",(s(l),y(()=>s(l).secondarySteps-1))),N(Tr,`${s(l),y(()=>s(l).rhythmSteps)??""}:${s(l),y(()=>s(l).secondarySteps)??""} polyrhythm`)}),X(oe,()=>s(l).rhythmSteps,Re=>G(l,s(l).rhythmSteps=Re)),X(le,()=>s(l).rhythmPulses,Re=>G(l,s(l).rhythmPulses=Re)),X(_e,()=>s(l).rhythmRotation,Re=>G(l,s(l).rhythmRotation=Re)),X(lt,()=>s(l).secondarySteps,Re=>G(l,s(l).secondarySteps=Re)),X(Wt,()=>s(l).secondaryPulses,Re=>G(l,s(l).secondaryPulses=Re)),X(Xt,()=>s(l).secondaryRotation,Re=>G(l,s(l).secondaryRotation=Re)),q(A,k)},O=A=>{var k=pn(),j=dt(k);{var W=J=>{var ae=li(),oe=g(dt(ae),2),me=g(_(oe),2);_n(me,4,()=>[48,96,192],mn,(ce,we)=>{var B=oi();B.__click=()=>P(we);var lt=_(B);Z(()=>{$(B,1,`flex-1 py-2 px-3 rounded font-mono text-sm transition-colors
              ${s(l),y(()=>s(l).rhythmSteps===we?"bg-purple-600 text-white":"bg-neutral-800 text-neutral-400 hover:bg-neutral-700")??""}`),N(lt,we)}),q(ce,B)});var xe=g(oe,2),De=_(xe),le=_(De),je=_(le),ue=g(le,2);ue.__input=p;var Ve=g(De,2),_e=_(Ve),re=_(_e),z=g(_e,2);z.__input=p,Z((ce,we)=>{N(je,`Density: ${ce??""}`),N(re,`Tension: ${we??""}`)},[()=>(s(l),y(()=>s(l).rhythmDensity.toFixed(2))),()=>(s(l),y(()=>s(l).rhythmTension.toFixed(2)))]),X(ue,()=>s(l).rhythmDensity,ce=>G(l,s(l).rhythmDensity=ce)),X(z,()=>s(l).rhythmTension,ce=>G(l,s(l).rhythmTension=ce)),q(J,ae)},be=J=>{var ae=ui(),oe=g(dt(ae),2),me=_(oe),xe=_(me),De=_(xe),le=g(xe,2);le.__input=p;var je=g(me,2),ue=_(je),Ve=_(ue),_e=g(ue,2);_e.__input=p,Z((re,z)=>{N(De,`Density: ${re??""}`),N(Ve,`Tension: ${z??""}`)},[()=>(s(l),y(()=>s(l).rhythmDensity.toFixed(2))),()=>(s(l),y(()=>s(l).rhythmTension.toFixed(2)))]),X(le,()=>s(l).rhythmDensity,re=>G(l,s(l).rhythmDensity=re)),X(_e,()=>s(l).rhythmTension,re=>G(l,s(l).rhythmTension=re)),q(J,ae)};ie(j,J=>{s(l),y(()=>s(l).rhythmMode===1)?J(W):J(be,!1)},!0)}q(A,k)};ie(M,A=>{s(l),y(()=>s(l).rhythmMode===0)?A(V):A(O,!1)})}Z(()=>{$(C,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
        ${s(l),y(()=>s(l).rhythmMode===0?"bg-orange-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`),$(F,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
        ${s(l),y(()=>s(l).rhythmMode===1?"bg-purple-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`),$(d,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
        ${s(l),y(()=>s(l).rhythmMode===2?"bg-teal-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`)}),q(t,x),Ae()}Mt(["click","input"]);var di=K('<div class="p-5 bg-neutral-900/50 rounded-lg border-l-4 border-green-500"><h3 class="text-lg font-semibold text-green-400 mb-4">Harmony</h3> <div class="flex rounded-lg bg-neutral-800 p-1.5 mb-4"><button>Basic</button> <button>Driver</button></div> <p class="text-xs text-neutral-500 mb-4 text-center"> </p> <div class="grid grid-cols-2 gap-6"><div><span class="text-sm text-neutral-400 mb-2 block"> </span> <input type="range" min="-1" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Minor</span> <span>Major</span></div></div> <div><span class="text-sm text-neutral-400 mb-2 block"> </span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Consonant</span> <span>Dissonant</span></div></div></div></div>');function hi(t,e){ke(e,!1);let n=w(e,"bridge",8),r=w(e,"state",8),i=w(e,"harmonyValence",8),a=w(e,"harmonyTension",8),o=U({harmonyValence:i(),harmonyTension:a()}),c=U(!1),u=null;function f(){R(c,!0),u&&clearTimeout(u),u=setTimeout(()=>{R(c,!1)},500)}function h(){f(),n().setDirectHarmonyValence(s(o).harmonyValence),n().setDirectHarmonyTension(s(o).harmonyTension)}function v(A){n().setHarmonyMode(A)}de(()=>(s(c),b(i()),b(a())),()=>{s(c)||R(o,{harmonyValence:i(),harmonyTension:a()})}),at(),Fe();var l=di(),m=g(_(l),2),S=_(m);S.__click=()=>v(0);var T=g(S,2);T.__click=()=>v(1);var p=g(m,2),E=_(p),P=g(p,2),x=_(P),D=_(x),C=_(D),F=g(D,2);F.__input=h;var d=g(x,2),M=_(d),V=_(M),O=g(M,2);O.__input=h,Z((A,k)=>{$(S,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
        ${b(r()),y(()=>r().harmonyMode===0?"bg-green-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`),$(T,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
        ${b(r()),y(()=>r().harmonyMode===1?"bg-cyan-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`),N(E,(b(r()),y(()=>r().harmonyMode===0?"Russell Circumplex (I-IV-vi-V)":"Steedman + Neo-Riemannian + LCC"))),N(C,`Valence: ${A??""}`),N(V,`Tension: ${k??""}`)},[()=>(s(o),y(()=>s(o).harmonyValence.toFixed(2))),()=>(s(o),y(()=>s(o).harmonyTension.toFixed(2)))]),X(F,()=>s(o).harmonyValence,A=>G(o,s(o).harmonyValence=A)),X(O,()=>s(o).harmonyTension,A=>G(o,s(o).harmonyTension=A)),q(t,l),Ae()}Mt(["click","input"]);var vi=K('<div class="p-5 bg-neutral-900/50 rounded-lg border-l-4 border-blue-500"><h3 class="text-lg font-semibold text-blue-400 mb-4">Melody & Voicing</h3> <div class="grid grid-cols-3 gap-5"><div><span class="text-sm text-neutral-400 mb-2 block">Smoothness</span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-blue-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Erratic</span> <span>Smooth</span></div></div> <div><span class="text-sm text-neutral-400 mb-2 block">Density</span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-blue-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Sparse</span> <span>Dense</span></div></div> <div><span class="text-sm text-neutral-400 mb-2 block">Filter</span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-blue-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Muffled</span> <span>Bright</span></div></div></div></div>');function pi(t,e){ke(e,!1);let n=w(e,"bridge",8),r=w(e,"melodySmoothness",8),i=w(e,"voicingDensity",8),a=w(e,"voicingTension",8),o=U({melodySmoothness:r(),voicingDensity:i(),voicingTension:a()}),c=U(!1),u=null;function f(){R(c,!0),u&&clearTimeout(u),u=setTimeout(()=>{R(c,!1)},500)}function h(){f(),n().setDirectMelodySmoothness(s(o).melodySmoothness),n().setDirectVoicingDensity(s(o).voicingDensity),n().setDirectVoicingTension(s(o).voicingTension)}de(()=>(s(c),b(r()),b(i()),b(a())),()=>{s(c)||R(o,{melodySmoothness:r(),voicingDensity:i(),voicingTension:a()})}),at(),Fe();var v=vi(),l=g(_(v),2),m=_(l),S=g(_(m),2);S.__input=h;var T=g(m,2),p=g(_(T),2);p.__input=h;var E=g(T,2),P=g(_(E),2);P.__input=h,X(S,()=>s(o).melodySmoothness,x=>G(o,s(o).melodySmoothness=x)),X(p,()=>s(o).voicingDensity,x=>G(o,s(o).voicingDensity=x)),X(P,()=>s(o).voicingTension,x=>G(o,s(o).voicingTension=x)),q(t,v),Ae()}Mt(["input"]);var mi=K('<div class="technical-controls space-y-6"><div class="p-5 bg-neutral-900 rounded-lg"><h3 class="text-base font-semibold text-neutral-400 mb-4">Modules</h3> <div class="flex gap-3"><button>Rhythm</button> <button>Harmony</button> <button>Melody</button> <button>Voicing</button></div></div> <div class="py-2"><div class="flex justify-between mb-3"><span class="text-xl font-semibold">BPM</span> <span class="text-lg text-cyan-400 font-mono"> </span></div> <input type="range" min="30" max="200" step="1" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-cyan-600"/></div> <!> <!> <!></div>');function _i(t,e){ke(e,!1);let n=w(e,"bridge",8),r=w(e,"state",8),i=w(e,"enableRhythm",8,!0),a=w(e,"enableHarmony",8,!0),o=w(e,"enableMelody",8,!0),c=w(e,"enableVoicing",8,!1),u=w(e,"bpm",8,120),f=w(e,"rhythmMode",8,0),h=w(e,"rhythmSteps",8,16),v=w(e,"rhythmPulses",8,4),l=w(e,"rhythmRotation",8,0),m=w(e,"rhythmDensity",8,.5),S=w(e,"rhythmTension",8,.3),T=w(e,"secondarySteps",8,12),p=w(e,"secondaryPulses",8,3),E=w(e,"secondaryRotation",8,0),P=w(e,"harmonyValence",8,.3),x=w(e,"harmonyTension",8,.3),D=w(e,"melodySmoothness",8,.7),C=w(e,"voicingDensity",8,.5),F=w(e,"voicingTension",8,.3),d=U({enableRhythm:i(),enableHarmony:a(),enableMelody:o(),enableVoicing:c(),bpm:u(),rhythmMode:f(),rhythmSteps:h(),rhythmPulses:v(),rhythmRotation:l(),rhythmDensity:m(),rhythmTension:S(),secondarySteps:T(),secondaryPulses:p(),secondaryRotation:E(),harmonyValence:P(),harmonyTension:x(),melodySmoothness:D(),voicingDensity:C(),voicingTension:F()}),M=U(!1),V=null;function O(){R(M,!0),V&&clearTimeout(V),V=setTimeout(()=>{R(M,!1)},500)}function A(){O(),n().setDirectBpm(s(d).bpm),n().setDirectEnableRhythm(s(d).enableRhythm),n().setDirectEnableHarmony(s(d).enableHarmony),n().setDirectEnableMelody(s(d).enableMelody),n().setDirectEnableVoicing(s(d).enableVoicing),n().setDirectRhythmMode(s(d).rhythmMode),n().setDirectRhythmSteps(s(d).rhythmSteps),n().setDirectRhythmPulses(s(d).rhythmPulses),n().setDirectRhythmRotation(s(d).rhythmRotation),n().setDirectRhythmDensity(s(d).rhythmDensity),n().setDirectRhythmTension(s(d).rhythmTension),n().setDirectSecondarySteps(s(d).secondarySteps),n().setDirectSecondaryPulses(s(d).secondaryPulses),n().setDirectSecondaryRotation(s(d).secondaryRotation),n().setDirectHarmonyTension(s(d).harmonyTension),n().setDirectHarmonyValence(s(d).harmonyValence),n().setDirectMelodySmoothness(s(d).melodySmoothness),n().setDirectVoicingDensity(s(d).voicingDensity),n().setDirectVoicingTension(s(d).voicingTension)}function k(B){O(),B==="rhythm"?G(d,s(d).enableRhythm=!s(d).enableRhythm):B==="harmony"?G(d,s(d).enableHarmony=!s(d).enableHarmony):B==="melody"?G(d,s(d).enableMelody=!s(d).enableMelody):B==="voicing"&&G(d,s(d).enableVoicing=!s(d).enableVoicing),A()}de(()=>(s(M),b(i()),b(a()),b(o()),b(c()),b(u()),b(f()),b(h()),b(v()),b(l()),b(m()),b(S()),b(T()),b(p()),b(E()),b(P()),b(x()),b(D()),b(C()),b(F())),()=>{s(M)||R(d,{enableRhythm:i(),enableHarmony:a(),enableMelody:o(),enableVoicing:c(),bpm:u(),rhythmMode:f(),rhythmSteps:h(),rhythmPulses:v(),rhythmRotation:l(),rhythmDensity:m(),rhythmTension:S(),secondarySteps:T(),secondaryPulses:p(),secondaryRotation:E(),harmonyValence:P(),harmonyTension:x(),melodySmoothness:D(),voicingDensity:C(),voicingTension:F()})}),at(),Fe();var j=mi(),W=_(j),be=g(_(W),2),J=_(be);J.__click=()=>k("rhythm");var ae=g(J,2);ae.__click=()=>k("harmony");var oe=g(ae,2);oe.__click=()=>k("melody");var me=g(oe,2);me.__click=()=>k("voicing");var xe=g(W,2),De=_(xe),le=g(_(De),2),je=_(le),ue=g(De,2);ue.__input=A;var Ve=g(xe,2);{var _e=B=>{fi(B,{get bridge(){return n()},get rhythmMode(){return s(d),y(()=>s(d).rhythmMode)},get rhythmSteps(){return s(d),y(()=>s(d).rhythmSteps)},get rhythmPulses(){return s(d),y(()=>s(d).rhythmPulses)},get rhythmRotation(){return s(d),y(()=>s(d).rhythmRotation)},get rhythmDensity(){return s(d),y(()=>s(d).rhythmDensity)},get rhythmTension(){return s(d),y(()=>s(d).rhythmTension)},get secondarySteps(){return s(d),y(()=>s(d).secondarySteps)},get secondaryPulses(){return s(d),y(()=>s(d).secondaryPulses)},get secondaryRotation(){return s(d),y(()=>s(d).secondaryRotation)}})};ie(Ve,B=>{s(d),y(()=>s(d).enableRhythm)&&B(_e)})}var re=g(Ve,2);{var z=B=>{hi(B,{get bridge(){return n()},get state(){return r()},get harmonyValence(){return s(d),y(()=>s(d).harmonyValence)},get harmonyTension(){return s(d),y(()=>s(d).harmonyTension)}})};ie(re,B=>{s(d),y(()=>s(d).enableHarmony)&&B(z)})}var ce=g(re,2);{var we=B=>{pi(B,{get bridge(){return n()},get melodySmoothness(){return s(d),y(()=>s(d).melodySmoothness)},get voicingDensity(){return s(d),y(()=>s(d).voicingDensity)},get voicingTension(){return s(d),y(()=>s(d).voicingTension)}})};ie(ce,B=>{s(d),y(()=>s(d).enableMelody||s(d).enableVoicing)&&B(we)})}Z(()=>{$(J,1,`flex-1 py-3 px-4 rounded-lg text-base font-medium transition-colors
          ${s(d),y(()=>s(d).enableRhythm?"bg-orange-600 text-white":"bg-neutral-700 text-neutral-400")??""}`),$(ae,1,`flex-1 py-3 px-4 rounded-lg text-base font-medium transition-colors
          ${s(d),y(()=>s(d).enableHarmony?"bg-green-600 text-white":"bg-neutral-700 text-neutral-400")??""}`),$(oe,1,`flex-1 py-3 px-4 rounded-lg text-base font-medium transition-colors
          ${s(d),y(()=>s(d).enableMelody?"bg-blue-600 text-white":"bg-neutral-700 text-neutral-400")??""}`),$(me,1,`flex-1 py-3 px-4 rounded-lg text-base font-medium transition-colors
          ${s(d),y(()=>s(d).enableVoicing?"bg-purple-600 text-white":"bg-neutral-700 text-neutral-400")??""}`),N(je,(s(d),y(()=>s(d).bpm)))}),X(ue,()=>s(d).bpm,B=>G(d,s(d).bpm=B)),q(t,j),Ae()}Mt(["click","input"]);var yi=K('<div class="bg-neutral-800 rounded-xl p-6 shadow-xl h-fit sticky top-8"><div class="mb-8"><div class="flex rounded-lg bg-neutral-900 p-1.5"><button>Emotional</button> <button>Technical</button></div> <p class="text-sm text-neutral-500 text-center mt-3"> </p></div> <!></div>');function gi(t,e){ke(e,!1);let n=w(e,"bridge",8),r=w(e,"state",8),i=U(!0),a=U(!1),o=null;function c(){R(a,!0),o&&clearTimeout(o),o=setTimeout(()=>{R(a,!1)},500),R(i,!s(i)),s(i)?n().useEmotionMode():n().useDirectMode()}de(()=>(s(a),b(r())),()=>{s(a)||R(i,r().isEmotionMode)}),at(),Fe();var u=yi(),f=_(u),h=_(f),v=_(h);v.__click=()=>{s(i)||c()};var l=g(v,2);l.__click=()=>{s(i)&&c()};var m=g(h,2),S=_(m),T=g(f,2);{var p=P=>{ii(P,{get bridge(){return n()},get arousal(){return b(r()),y(()=>r().arousal)},get valence(){return b(r()),y(()=>r().valence)},get density(){return b(r()),y(()=>r().density)},get tension(){return b(r()),y(()=>r().tension)}})},E=P=>{_i(P,{get bridge(){return n()},get state(){return r()},get enableRhythm(){return b(r()),y(()=>r().enableRhythm)},get enableHarmony(){return b(r()),y(()=>r().enableHarmony)},get enableMelody(){return b(r()),y(()=>r().enableMelody)},get enableVoicing(){return b(r()),y(()=>r().enableVoicing)},get bpm(){return b(r()),y(()=>r().bpm)},get rhythmMode(){return b(r()),y(()=>r().rhythmMode)},get rhythmSteps(){return b(r()),y(()=>r().primarySteps)},get rhythmPulses(){return b(r()),y(()=>r().primaryPulses)},get rhythmRotation(){return b(r()),y(()=>r().primaryRotation)},get rhythmDensity(){return b(r()),y(()=>r().rhythmDensity)},get rhythmTension(){return b(r()),y(()=>r().rhythmTension)},get secondarySteps(){return b(r()),y(()=>r().secondarySteps)},get secondaryPulses(){return b(r()),y(()=>r().secondaryPulses)},get secondaryRotation(){return b(r()),y(()=>r().secondaryRotation)},get harmonyValence(){return b(r()),y(()=>r().harmonyValence)},get harmonyTension(){return b(r()),y(()=>r().harmonyTension)},get melodySmoothness(){return b(r()),y(()=>r().melodySmoothness)},get voicingDensity(){return b(r()),y(()=>r().voicingDensity)},get voicingTension(){return b(r()),y(()=>r().voicingTension)}})};ie(T,P=>{s(i)?P(p):P(E,!1)})}Z(()=>{$(v,1,`flex-1 py-3 px-6 rounded-md text-base font-semibold transition-all duration-200
          ${s(i)?"bg-purple-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200"}`),$(l,1,`flex-1 py-3 px-6 rounded-md text-base font-semibold transition-all duration-200
          ${s(i)?"text-neutral-400 hover:text-neutral-200":"bg-cyan-600 text-white shadow-lg"}`),N(S,s(i)?"Russell's Circumplex Model":"Direct Musical Parameters")}),q(t,u),Ae()}Mt(["click"]);var bi=vn("<circle></circle>"),xi=vn('<line x1="50" y1="50" stroke="white" stroke-width="1" stroke-dasharray="2,2" opacity="0.8"></line>'),wi=vn('<text x="50" y="52" text-anchor="middle" font-size="6" font-weight="bold"> </text>'),Si=K('<div class="circle-container svelte-ia7egi"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" stroke="#333" stroke-width="0.5" fill="none"></circle><polygon fill-opacity="0.1" stroke-width="1.5"></polygon><!><!><!></svg></div>');function Vn(t,e){ke(e,!1);const n=U(),r=U(),i=U(),a=U();let o=w(e,"steps",8,16),c=w(e,"pulses",8,4),u=w(e,"rotation",8,0),f=w(e,"color",8,"#ff3e00"),h=w(e,"label",8,""),v=w(e,"currentStep",8,0),l=w(e,"radius",8,150),m=w(e,"externalPattern",8,null);function S(d,M){let V=new Array(d).fill(!1);if(d===0)return V;let O=0;for(let A=0;A<d;A++)O+=M,O>=d&&(O-=d,V[A]=!0);return V}de(()=>(b(m()),b(o()),b(c())),()=>{R(n,m()??S(o(),c()))}),de(()=>(b(m()),s(n),b(o()),b(u())),()=>{R(r,m()?s(n):[...s(n).slice(o()-u()),...s(n).slice(0,o()-u())])}),de(()=>(b(o()),s(r),b(v())),()=>{R(i,Array.from({length:o()}).map((d,M)=>{const V=M*2*Math.PI/o()-Math.PI/2,O=45;return{x:50+O*Math.cos(V),y:50+O*Math.sin(V),active:s(r)[M],isCurrent:v()%o()===M}}))}),de(()=>s(i),()=>{R(a,s(i).filter(d=>d.active).map(d=>`${d.x},${d.y}`).join(" "))}),at(),Fe();var T=Si(),p=_(T),E=g(_(p)),P=g(E);_n(P,1,()=>s(i),mn,(d,M)=>{var V=pn(),O=dt(V);{var A=k=>{var j=bi();let W;Z(()=>{fe(j,"cx",(s(M),y(()=>s(M).x))),fe(j,"cy",(s(M),y(()=>s(M).y))),fe(j,"r",(s(M),y(()=>s(M).isCurrent?3:2))),fe(j,"fill",f()),W=$(j,0,"svelte-ia7egi",null,W,{current:s(M).isCurrent})}),q(k,j)};ie(O,k=>{s(M),y(()=>s(M).active)&&k(A)})}q(d,V)});var x=g(P);{var D=d=>{var M=xi();Z(()=>{fe(M,"x2",(s(i),b(v()),b(o()),y(()=>s(i)[v()%o()].x))),fe(M,"y2",(s(i),b(v()),b(o()),y(()=>s(i)[v()%o()].y)))}),q(d,M)};ie(x,d=>{s(i),y(()=>s(i).length>0)&&d(D)})}var C=g(x);{var F=d=>{var M=wi(),V=_(M);Z(()=>{fe(M,"fill",f()),N(V,h())}),q(d,M)};ie(C,d=>{h()&&d(F)})}Z(()=>{Zs(T,`width: ${l()*2}px; height: ${l()*2}px;`),fe(E,"points",s(a)),fe(E,"fill",f()),fe(E,"stroke",f())}),q(t,T),Ae()}var Ei=K('<p class="text-xs text-neutral-500"> </p>'),Mi=K('<p class="text-xs text-neutral-500"> </p>'),Ti=K('<div class="bg-neutral-800 rounded-xl p-8 shadow-xl border border-neutral-700"><div class="flex items-center justify-center gap-4 mb-6"><span> </span> <span class="text-neutral-500 text-sm font-mono"> </span></div> <div class="flex flex-wrap justify-center items-center gap-8 py-4"><!> <!></div> <div class="mt-6 text-center"><!></div></div>');function Di(t,e){ke(e,!1);let n=w(e,"rhythmMode",8,0),r=w(e,"primarySteps",8,16),i=w(e,"primaryPulses",8,4),a=w(e,"primaryRotation",8,0),o=w(e,"primaryPattern",24,()=>[]),c=w(e,"secondarySteps",8,12),u=w(e,"secondaryPulses",8,3),f=w(e,"secondaryRotation",8,0),h=w(e,"secondaryPattern",24,()=>[]),v=w(e,"currentStep",8,0),l=w(e,"rhythmDensity",8,.5),m=w(e,"rhythmTension",8,.3);Fe();var S=Ti(),T=_(S),p=_(T),E=_(p),P=g(p,2),x=_(P),D=g(T,2),C=_(D);{let k=We(()=>(b(o()),y(()=>o().length>0?o():null))),j=We(()=>n()===0?"#ff3e00":"#a855f7"),W=We(()=>n()===0?"PRIMARY":"GROOVE"),be=We(()=>n()===0?120:150);Vn(C,{get steps(){return r()},get pulses(){return i()},get rotation(){return a()},get externalPattern(){return s(k)},get color(){return s(j)},get label(){return s(W)},get currentStep(){return v()},get radius(){return s(be)}})}var F=g(C,2);{var d=k=>{{let j=We(()=>(b(h()),y(()=>h().length>0?h():null)));Vn(k,{get steps(){return c()},get pulses(){return u()},get rotation(){return f()},get externalPattern(){return s(j)},color:"#4ade80",label:"SECONDARY",get currentStep(){return v()},radius:120})}};ie(F,k=>{n()===0&&k(d)})}var M=g(D,2),V=_(M);{var O=k=>{var j=Ei(),W=_(j);Z(()=>N(W,`${r()??""}:${c()??""} polyrhythm (${i()??""}/${r()??""} vs ${u()??""}/${c()??""})`)),q(k,j)},A=k=>{var j=Mi(),W=_(j);Z((be,J)=>N(W,`Density: ${be??""}% | Tension: ${J??""}%`),[()=>(b(l()),y(()=>(l()*100).toFixed(0))),()=>(b(m()),y(()=>(m()*100).toFixed(0)))]),q(k,j)};ie(V,k=>{n()===0?k(O):k(A,!1)})}Z(()=>{$(p,1,`px-3 py-1 rounded-full text-sm font-semibold
      ${n()===0?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-purple-500/20 text-purple-400 border border-purple-500/50"}`),N(E,n()===0?"Euclidean":"PerfectBalance"),N(x,`${r()??""} steps`)}),q(t,S),Ae()}var Ri=K('<div class="text-neutral-600 text-sm mx-1">-></div>'),Pi=K('<div class="flex items-center"><div> </div> <!></div>'),Ci=K('<div class="bg-neutral-800 rounded-xl p-6 shadow-xl border border-neutral-700"><h2 class="text-xl font-bold mb-2 text-center text-purple-300">Harmonic Context</h2> <div class="flex justify-center gap-2 mb-2"><span> </span></div> <p class="text-xs text-neutral-400 text-center mb-4"> </p> <div class="flex justify-center items-center gap-3 flex-wrap mb-4"></div> <div class="flex justify-between items-center bg-neutral-900/50 rounded p-2"><span class="text-sm text-neutral-400"> </span> <span> </span></div></div>');function ki(t,e){ke(e,!1);let n=w(e,"currentChord",8,"I"),r=w(e,"currentMeasure",8,1),i=w(e,"isMinorChord",8,!1),a=w(e,"progressionName",8,""),o=w(e,"progressionChords",24,()=>[]),c=w(e,"harmonyMode",8,1);Fe();var u=Ci(),f=g(_(u),2),h=_(f),v=_(h),l=g(f,2),m=_(l),S=g(l,2);_n(S,5,o,mn,(D,C,F)=>{var d=Pi(),M=_(d),V=_(M),O=g(M,2);{var A=k=>{var j=Ri();q(k,j)};ie(O,k=>{b(o()),y(()=>F<o().length-1)&&k(A)})}Z(()=>{$(M,1,`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold transition-all duration-300
            ${n()===s(C)?"bg-purple-600 text-white scale-110 shadow-lg shadow-purple-500/50":"bg-neutral-700 text-neutral-400"}`),N(V,s(C)||"?")}),q(D,d)});var T=g(S,2),p=_(T),E=_(p),P=g(p,2),x=_(P);Z(()=>{$(h,1,`text-xs px-2 py-1 rounded ${c()===0?"bg-green-500/30 text-green-300":"bg-cyan-500/30 text-cyan-300"}`),N(v,c()===0?"Basic":"Driver"),N(m,a()),N(E,`Measure ${r()??""}`),$(P,1,`text-2xl font-bold ${i()?"text-blue-400":"text-yellow-400"}`),N(x,n())}),q(t,u),Ae()}var Ai=K('<span class="key-info svelte-13jqdpc"> </span>'),Vi=K('<div class="error svelte-13jqdpc"> </div>'),Ni=K('<div class="main-content svelte-13jqdpc"><div class="visualizations svelte-13jqdpc"><!> <!></div> <div class="controls svelte-13jqdpc"><!></div></div>'),Oi=K('<div class="vst-container svelte-13jqdpc"><header class="header svelte-13jqdpc"><h1 class="svelte-13jqdpc">Harmonium</h1> <span class="subtitle svelte-13jqdpc">Morphing Music Engine</span> <!></header> <!></div>');function Ii(t,e){ke(e,!1);let n=U(null),r=U(xr()),i=null,a=U(""),o=U(0),c=-1,u=16,f=0,h=!0,v=U([]);br(async()=>{try{R(n,new ri),await s(n).connect(),i=s(n).subscribe(x=>{const D=x.rhythmMode!==f,C=x.primarySteps!==u,F=x.isEmotionMode!==h;(D||C||F)&&(c=-1,u=x.primarySteps,f=x.rhythmMode,h=x.isEmotionMode);const d=x.currentStep;if(d!==c){let V=d-c;V<0&&(V+=x.primarySteps),c===-1?R(o,d):R(o,s(o)+V),c=d}x.progressionLength!==s(v).length&&R(v,Array(x.progressionLength).fill("?"));const M=x.currentMeasure>0?(x.currentMeasure-1)%s(v).length:0;M<s(v).length&&(G(v,s(v)[M]=x.currentChord),R(v,[...s(v)])),R(r,x)})}catch(x){console.error("Failed to connect bridge:",x),R(a,String(x))}}),qs(()=>{i?.(),s(n)?.disconnect()}),Fe();var l=Oi(),m=_(l),S=g(_(m),4);{var T=x=>{var D=Ai(),C=_(D);Z(()=>N(C,`${s(r).key??""} ${s(r).scale??""}`)),q(x,D)};ie(S,x=>{s(r).key&&s(r).scale&&x(T)})}var p=g(m,2);{var E=x=>{var D=Vi(),C=_(D);Z(()=>N(C,s(a))),q(x,D)},P=x=>{var D=Ni(),C=_(D),F=_(C);Di(F,{get rhythmMode(){return s(r).rhythmMode},get primarySteps(){return s(r).primarySteps},get primaryPulses(){return s(r).primaryPulses},get primaryRotation(){return s(r).primaryRotation},get primaryPattern(){return s(r).primaryPattern},get secondarySteps(){return s(r).secondarySteps},get secondaryPulses(){return s(r).secondaryPulses},get secondaryRotation(){return s(r).secondaryRotation},get secondaryPattern(){return s(r).secondaryPattern},get currentStep(){return s(o)},get rhythmDensity(){return s(r).rhythmDensity},get rhythmTension(){return s(r).rhythmTension}});var d=g(F,2);ki(d,{get currentChord(){return s(r).currentChord},get currentMeasure(){return s(r).currentMeasure},get isMinorChord(){return s(r).isMinorChord},get progressionName(){return s(r).progressionName},get progressionChords(){return s(v)},get harmonyMode(){return s(r).harmonyMode}});var M=g(C,2),V=_(M);{var O=A=>{var k=pn(),j=dt(k);Gs(j,()=>s(n),W=>{gi(W,{get state(){return s(r)},get bridge(){return s(n)}})}),q(A,k)};ie(V,A=>{s(n)&&A(O)})}q(x,D)};ie(p,x=>{s(a)?x(E):x(P,!1)})}q(t,l),Ae()}Hs(Ii,{target:document.getElementById("app")});
