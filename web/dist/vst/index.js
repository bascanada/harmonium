(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const bs="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(bs);let ft=!1,xs=!1;function ws(){ft=!0}ws();const Ms=1,Ss=2,pr=4,Es=8,Ts=16,Ps=1,Rs=2,Ds=4,Cs=8,As=16,ks=1,Ns=2,Q=Symbol(),Os="http://www.w3.org/1999/xhtml",_n=!1;var _r=Array.isArray,Vs=Array.prototype.indexOf,Jt=Array.from,Is=Object.defineProperty,nt=Object.getOwnPropertyDescriptor,mr=Object.getOwnPropertyDescriptors,Fs=Object.prototype,js=Array.prototype,En=Object.getPrototypeOf,nr=Object.isExtensible;function Ls(e){return e()}function mn(e){for(var t=0;t<e.length;t++)e[t]()}function yr(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const J=2,gr=4,Xt=8,Hs=1<<24,Te=16,Pe=32,We=64,Qt=128,_e=512,K=1024,ae=2048,me=4096,le=8192,Se=16384,Tn=32768,st=65536,rr=1<<17,br=1<<18,ct=1<<19,xr=1<<20,Me=1<<25,ze=32768,yn=1<<21,Pn=1<<22,Oe=1<<23,rt=Symbol("$state"),Bs=Symbol("legacy props"),qs=Symbol(""),et=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function wr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Us(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ys(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ks(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ws(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Zs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Js(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Qs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function $s(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Mr(e){return e===this.v}function ei(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Sr(e){return!ei(e,this.v)}let q=null;function it(e){q=e}function Fe(e,t=!1,n){q={p:q,i:!1,c:null,e:null,s:e,x:null,l:ft&&!t?{s:null,u:null,$:[]}:null}}function je(e){var t=q,n=t.e;if(n!==null){t.e=null;for(var r of n)Lr(r)}return t.i=!0,q=t.p,{}}function dt(){return!ft||q!==null&&q.l===null}let Be=[];function Er(){var e=Be;Be=[],mn(e)}function $t(e){if(Be.length===0&&!Tt){var t=Be;queueMicrotask(()=>{t===Be&&Er()})}Be.push(e)}function ti(){for(;Be.length>0;)Er()}function Tr(e){var t=j;if(t===null)return k.f|=Oe,e;if((t.f&Tn)===0){if((t.f&Qt)===0)throw e;t.b.error(e)}else at(e,t)}function at(e,t){for(;t!==null;){if((t.f&Qt)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Bt=new Set;let L=null,Yt=null,de=null,fe=[],en=null,gn=!1,Tt=!1;class ge{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#i=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){fe=[],Yt=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#a(r,n);this.is_fork||this.#f(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(Yt=this,L=null,sr(n.render_effects),sr(n.effects),Yt=null,this.#l?.resolve()),de=null}#a(t,n){t.f^=K;for(var r=t.first;r!==null;){var s=r.f,i=(s&(Pe|We))!==0,l=i&&(s&K)!==0,f=l||(s&le)!==0||this.skipped_effects.has(r);if((r.f&Qt)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!f&&r.fn!==null){i?r.f^=K:(s&gr)!==0?n.effects.push(r):ht(r)&&((r.f&Te)!==0&&this.#i.add(r),ut(r));var u=r.first;if(u!==null){r=u;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=c.next,c=c.parent}}#o(t){for(const n of t)(n.f&ae)!==0?this.#i.add(n):(n.f&me)!==0&&this.#s.add(n),this.#u(n.deps),Z(n,K)}#u(t){if(t!==null)for(const n of t)(n.f&J)===0||(n.f&ze)===0||(n.f^=ze,this.#u(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Oe)===0&&(this.current.set(t,t.v),de?.set(t,t.v))}activate(){L=this,this.apply()}deactivate(){L===this&&(L=null,de=null)}flush(){if(this.activate(),fe.length>0){if(Pr(),L!==null&&L!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#f(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#c()}#c(){if(Bt.size>1){this.previous.clear();var t=de,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Bt){if(i===this){n=!1;continue}const l=[];for(const[u,c]of this.current){if(i.current.has(u))if(n&&c!==i.current.get(u))i.current.set(u,c);else continue;l.push(u)}if(l.length===0)continue;const f=[...i.current.keys()].filter(u=>!this.current.has(u));if(f.length>0){var s=fe;fe=[];const u=new Set,c=new Map;for(const d of l)Rr(d,f,u,c);if(fe.length>0){L=i,i.apply();for(const d of fe)i.#a(d,r);i.deactivate()}fe=s}}L=null,de=t}this.committed=!0,Bt.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#i)this.#s.delete(t),Z(t,ae),Ge(t);for(const t of this.#s)Z(t,me),Ge(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=yr()).promise}static ensure(){if(L===null){const t=L=new ge;Bt.add(L),Tt||ge.enqueue(()=>{L===t&&t.flush()})}return L}static enqueue(t){$t(t)}apply(){}}function ni(e){var t=Tt;Tt=!0;try{for(var n;;){if(ti(),fe.length===0&&(L?.flush(),fe.length===0))return en=null,n;Pr()}}finally{Tt=t}}function Pr(){var e=Ue;gn=!0;var t=null;try{var n=0;for(Kt(!0);fe.length>0;){var r=ge.ensure();if(n++>1e3){var s,i;ri()}r.process(fe),Ve.clear()}}finally{gn=!1,Kt(e),en=null}}function ri(){try{Ks()}catch(e){at(e,en)}}let we=null;function sr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Se|le))===0&&ht(r)&&(we=new Set,ut(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?qr(r):r.fn=null),we?.size>0)){Ve.clear();for(const s of we){if((s.f&(Se|le))!==0)continue;const i=[s];let l=s.parent;for(;l!==null;)we.has(l)&&(we.delete(l),i.push(l)),l=l.parent;for(let f=i.length-1;f>=0;f--){const u=i[f];(u.f&(Se|le))===0&&ut(u)}}we.clear()}}we=null}}function Rr(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&J)!==0?Rr(s,t,n,r):(i&(Pn|Te))!==0&&(i&ae)===0&&Dr(s,t,r)&&(Z(s,ae),Ge(s))}}function Dr(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&J)!==0&&Dr(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function Ge(e){for(var t=en=e;t.parent!==null;){t=t.parent;var n=t.f;if(gn&&t===j&&(n&Te)!==0&&(n&br)===0)return;if((n&(We|Pe))!==0){if((n&K)===0)return;t.f^=K}}fe.push(t)}function si(e){let t=0,n=Ke(0),r;return()=>{Rt()&&(a(n),rn(()=>(t===0&&(r=g(()=>e(()=>Pt(n)))),t+=1,()=>{$t(()=>{t-=1,t===0&&(r?.(),r=void 0,Pt(n))})})))}}var ii=st|ct|Qt;function ai(e,t,n){new oi(e,t,n)}class oi{parent;#e=!1;#t;#r=null;#n;#l;#i;#s=null;#a=null;#o=null;#u=null;#f=null;#c=0;#d=0;#v=!1;#h=null;#g=si(()=>(this.#h=Ke(this.#c),()=>{this.#h=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=j.b,this.#e=!!this.#n.pending,this.#i=sn(()=>{j.b=this;{var s=this.#m();try{this.#s=ce(()=>r(s))}catch(i){this.error(i)}this.#d>0?this.#_():this.#e=!1}return()=>{this.#f?.remove()}},ii)}#b(){try{this.#s=ce(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#x(){const t=this.#n.pending;t&&(this.#a=ce(()=>t(this.#t)),ge.enqueue(()=>{var n=this.#m();this.#s=this.#p(()=>(ge.ensure(),ce(()=>this.#l(n)))),this.#d>0?this.#_():(qe(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#f=Ie(),this.#t.before(this.#f),t=this.#f),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=j,r=k,s=q;xe(this.#i),se(this.#i),it(this.#i.ctx);try{return t()}catch(i){return Tr(i),null}finally{xe(n),se(r),it(s)}}#_(){const t=this.#n.pending;this.#s!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#f),zr(this.#s,this.#u)),this.#a===null&&(this.#a=ce(()=>t(this.#t)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#a&&qe(this.#a,()=>{this.#a=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(t){this.#y(t),this.#c+=t,this.#h&&ot(this.#h,this.#c)}get_effect_pending(){return this.#g(),a(this.#h)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw t;this.#s&&(ie(this.#s),this.#s=null),this.#a&&(ie(this.#a),this.#a=null),this.#o&&(ie(this.#o),this.#o=null);var s=!1,i=!1;const l=()=>{if(s){$s();return}s=!0,i&&Qs(),ge.ensure(),this.#c=0,this.#o!==null&&qe(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#v=!1,ce(()=>this.#l(this.#t)))),this.#d>0?this.#_():this.#e=!1};var f=k;try{se(null),i=!0,n?.(t,l),i=!1}catch(u){at(u,this.#i&&this.#i.parent)}finally{se(f)}r&&$t(()=>{this.#o=this.#p(()=>{ge.ensure(),this.#v=!0;try{return ce(()=>{r(this.#t,()=>t,()=>l)})}catch(u){return at(u,this.#i.parent),null}finally{this.#v=!1}})})}}function li(e,t,n,r){const s=dt()?tn:Ne;if(n.length===0&&e.length===0){r(t.map(s));return}var i=L,l=j,f=ui();function u(){Promise.all(n.map(c=>fi(c))).then(c=>{f();try{r([...t.map(s),...c])}catch(d){(l.f&Se)===0&&at(d,l)}i?.deactivate(),zt()}).catch(c=>{at(c,l)})}e.length>0?Promise.all(e).then(()=>{f();try{return u()}finally{i?.deactivate(),zt()}}):u()}function ui(){var e=j,t=k,n=q,r=L;return function(i=!0){xe(e),se(t),it(n),i&&r?.activate()}}function zt(){xe(null),se(null),it(null)}function tn(e){var t=J|ae,n=k!==null&&(k.f&J)!==0?k:null;return j!==null&&(j.f|=ct),{ctx:q,deps:null,effects:null,equals:Mr,f:t,fn:e,reactions:null,rv:0,v:Q,wv:0,parent:n??j,ac:null}}function fi(e,t){let n=j;n===null&&Us();var r=n.b,s=void 0,i=Ke(Q),l=!k,f=new Map;return xi(()=>{var u=yr();s=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{c===L&&c.committed&&c.deactivate(),zt()})}catch(h){u.reject(h),zt()}var c=L;if(l){var d=!r.is_pending();r.update_pending_count(1),c.increment(d),f.get(c)?.reject(et),f.delete(c),f.set(c,u)}const p=(h,_=void 0)=>{if(c.activate(),_)_!==et&&(i.f|=Oe,ot(i,_));else{(i.f&Oe)!==0&&(i.f^=Oe),ot(i,h);for(const[S,R]of f){if(f.delete(S),S===c)break;R.reject(et)}}l&&(r.update_pending_count(-1),c.decrement(d))};u.promise.then(p,h=>p(null,h||"unknown"))}),yi(()=>{for(const u of f.values())u.reject(et)}),new Promise(u=>{function c(d){function p(){d===s?u(i):c(s)}d.then(p,p)}c(s)})}function Ne(e){const t=tn(e);return t.equals=Sr,t}function Cr(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ie(t[n])}}function ci(e){for(var t=e.parent;t!==null;){if((t.f&J)===0)return(t.f&Se)===0?t:null;t=t.parent}return null}function Rn(e){var t,n=j;xe(ci(e));try{e.f&=~ze,Cr(e),t=Zr(e)}finally{xe(n)}return t}function Ar(e){var t=Rn(e);if(e.equals(t)||(L?.is_fork||(e.v=t),e.wv=Kr()),!Ze)if(de!==null)(Rt()||L?.is_fork)&&de.set(e,t);else{var n=(e.f&_e)===0?me:K;Z(e,n)}}let bn=new Set;const Ve=new Map;let kr=!1;function Ke(e,t){var n={f:0,v:e,reactions:null,equals:Mr,rv:0,wv:0};return n}function Ae(e,t){const n=Ke(e);return Si(n),n}function z(e,t=!1,n=!0){const r=Ke(e);return t||(r.equals=Sr),ft&&n&&q!==null&&q.l!==null&&(q.l.s??=[]).push(r),r}function U(e,t){return P(e,g(()=>a(e))),t}function P(e,t,n=!1){k!==null&&(!be||(k.f&rr)!==0)&&dt()&&(k.f&(J|Te|Pn|rr))!==0&&!Ee?.includes(e)&&Xs();let r=n?tt(t):t;return ot(e,r)}function ot(e,t){if(!e.equals(t)){var n=e.v;Ze?Ve.set(e,t):Ve.set(e,n),e.v=t;var r=ge.ensure();r.capture(e,n),(e.f&J)!==0&&((e.f&ae)!==0&&Rn(e),Z(e,(e.f&_e)!==0?K:me)),e.wv=Kr(),Nr(e,ae),dt()&&j!==null&&(j.f&K)!==0&&(j.f&(Pe|We))===0&&(ue===null?Ei([e]):ue.push(e)),!r.is_fork&&bn.size>0&&!kr&&di()}return t}function di(){kr=!1;var e=Ue;Kt(!0);const t=Array.from(bn);try{for(const n of t)(n.f&K)!==0&&Z(n,me),ht(n)&&ut(n)}finally{Kt(e)}bn.clear()}function Pt(e){P(e,e.v+1)}function Nr(e,t){var n=e.reactions;if(n!==null)for(var r=dt(),s=n.length,i=0;i<s;i++){var l=n[i],f=l.f;if(!(!r&&l===j)){var u=(f&ae)===0;if(u&&Z(l,t),(f&J)!==0){var c=l;de?.delete(c),(f&ze)===0&&(f&_e&&(l.f|=ze),Nr(c,me))}else u&&((f&Te)!==0&&we!==null&&we.add(l),Ge(l))}}}function tt(e){if(typeof e!="object"||e===null||rt in e)return e;const t=En(e);if(t!==Fs&&t!==js)return e;var n=new Map,r=_r(e),s=Ae(0),i=Ye,l=f=>{if(Ye===i)return f();var u=k,c=Ye;se(null),lr(i);var d=f();return se(u),lr(c),d};return r&&n.set("length",Ae(e.length)),new Proxy(e,{defineProperty(f,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Zs();var d=n.get(u);return d===void 0?d=l(()=>{var p=Ae(c.value);return n.set(u,p),p}):P(d,c.value,!0),!0},deleteProperty(f,u){var c=n.get(u);if(c===void 0){if(u in f){const d=l(()=>Ae(Q));n.set(u,d),Pt(s)}}else P(c,Q),Pt(s);return!0},get(f,u,c){if(u===rt)return e;var d=n.get(u),p=u in f;if(d===void 0&&(!p||nt(f,u)?.writable)&&(d=l(()=>{var _=tt(p?f[u]:Q),S=Ae(_);return S}),n.set(u,d)),d!==void 0){var h=a(d);return h===Q?void 0:h}return Reflect.get(f,u,c)},getOwnPropertyDescriptor(f,u){var c=Reflect.getOwnPropertyDescriptor(f,u);if(c&&"value"in c){var d=n.get(u);d&&(c.value=a(d))}else if(c===void 0){var p=n.get(u),h=p?.v;if(p!==void 0&&h!==Q)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(f,u){if(u===rt)return!0;var c=n.get(u),d=c!==void 0&&c.v!==Q||Reflect.has(f,u);if(c!==void 0||j!==null&&(!d||nt(f,u)?.writable)){c===void 0&&(c=l(()=>{var h=d?tt(f[u]):Q,_=Ae(h);return _}),n.set(u,c));var p=a(c);if(p===Q)return!1}return d},set(f,u,c,d){var p=n.get(u),h=u in f;if(r&&u==="length")for(var _=c;_<p.v;_+=1){var S=n.get(_+"");S!==void 0?P(S,Q):_ in f&&(S=l(()=>Ae(Q)),n.set(_+"",S))}if(p===void 0)(!h||nt(f,u)?.writable)&&(p=l(()=>Ae(void 0)),P(p,tt(c)),n.set(u,p));else{h=p.v!==Q;var R=l(()=>tt(c));P(p,R)}var y=Reflect.getOwnPropertyDescriptor(f,u);if(y?.set&&y.set.call(d,c),!h){if(r&&typeof u=="string"){var M=n.get("length"),C=Number(u);Number.isInteger(C)&&C>=M.v&&P(M,C+1)}Pt(s)}return!0},ownKeys(f){a(s);var u=Reflect.ownKeys(f).filter(p=>{var h=n.get(p);return h===void 0||h.v!==Q});for(var[c,d]of n)d.v!==Q&&!(c in f)&&u.push(c);return u},setPrototypeOf(){Js()}})}var ir,Or,Vr,Ir;function hi(){if(ir===void 0){ir=window,Or=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Vr=nt(t,"firstChild").get,Ir=nt(t,"nextSibling").get,nr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),nr(n)&&(n.__t=void 0)}}function Ie(e=""){return document.createTextNode(e)}function lt(e){return Vr.call(e)}function Ct(e){return Ir.call(e)}function v(e,t){return lt(e)}function Gt(e,t=!1){{var n=lt(e);return n instanceof Comment&&n.data===""?Ct(n):n}}function m(e,t=1,n=!1){let r=e;for(;t--;)r=Ct(r);return r}function vi(e){e.textContent=""}function Fr(){return!1}let ar=!1;function pi(){ar||(ar=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Dn(e){var t=k,n=j;se(null),xe(null);try{return e()}finally{se(t),xe(n)}}function _i(e,t,n,r=n){e.addEventListener(t,()=>Dn(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),pi()}function jr(e){j===null&&(k===null&&Gs(),zs()),Ze&&Ys()}function mi(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Re(e,t,n){var r=j;r!==null&&(r.f&le)!==0&&(e|=le);var s={ctx:q,deps:null,nodes:null,f:e|ae|_e,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{ut(s),s.f|=Tn}catch(f){throw ie(s),f}else t!==null&&Ge(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&ct)===0&&(i=i.first,(e&Te)!==0&&(e&st)!==0&&i!==null&&(i.f|=st)),i!==null&&(i.parent=r,r!==null&&mi(i,r),k!==null&&(k.f&J)!==0&&(e&We)===0)){var l=k;(l.effects??=[]).push(i)}return s}function Rt(){return k!==null&&!be}function yi(e){const t=Re(Xt,null,!1);return Z(t,K),t.teardown=e,t}function xn(e){jr();var t=j.f,n=!k&&(t&Pe)!==0&&(t&Tn)===0;if(n){var r=q;(r.e??=[]).push(e)}else return Lr(e)}function Lr(e){return Re(gr|xr,e,!1)}function gi(e){return jr(),Re(Xt|xr,e,!0)}function bi(e){ge.ensure();const t=Re(We|ct,e,!0);return(n={})=>new Promise(r=>{n.outro?qe(t,()=>{ie(t),r(void 0)}):(ie(t),r(void 0))})}function ve(e,t){var n=q,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=rn(()=>{e(),!r.ran&&(r.ran=!0,g(t))})}function nn(){var e=q;rn(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&K)!==0&&Z(n,me),ht(n)&&ut(n),t.ran=!1}})}function xi(e){return Re(Pn|ct,e,!0)}function rn(e,t=0){return Re(Xt|t,e,!0)}function W(e,t=[],n=[],r=[]){li(r,t,n,s=>{Re(Xt,()=>e(...s.map(a)),!0)})}function sn(e,t=0){var n=Re(Te|t,e,!0);return n}function ce(e){return Re(Pe|ct,e,!0)}function Hr(e){var t=e.teardown;if(t!==null){const n=Ze,r=k;or(!0),se(null);try{t.call(null)}finally{or(n),se(r)}}}function Br(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Dn(()=>{s.abort(et)});var r=n.next;(n.f&We)!==0?n.parent=null:ie(n,t),n=r}}function wi(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Pe)===0&&ie(t),t=n}}function ie(e,t=!0){var n=!1;(t||(e.f&br)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Mi(e.nodes.start,e.nodes.end),n=!0),Br(e,t&&!n),Wt(e,0),Z(e,Se);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();Hr(e);var s=e.parent;s!==null&&s.first!==null&&qr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Mi(e,t){for(;e!==null;){var n=e===t?null:Ct(e);e.remove(),e=n}}function qr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function qe(e,t,n=!0){var r=[];Ur(e,r,!0);var s=()=>{n&&ie(e),t&&t()},i=r.length;if(i>0){var l=()=>--i||s();for(var f of r)f.out(l)}else s()}function Ur(e,t,n){if((e.f&le)===0){e.f^=le;var r=e.nodes&&e.nodes.t;if(r!==null)for(const f of r)(f.is_global||n)&&t.push(f);for(var s=e.first;s!==null;){var i=s.next,l=(s.f&st)!==0||(s.f&Pe)!==0&&(e.f&Te)!==0;Ur(s,t,l?n:!1),s=i}}}function Cn(e){Yr(e,!0)}function Yr(e,t){if((e.f&le)!==0){e.f^=le,(e.f&K)===0&&(Z(e,ae),Ge(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&st)!==0||(n.f&Pe)!==0;Yr(n,s?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function zr(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:Ct(n);t.append(n),n=s}}let Ue=!1;function Kt(e){Ue=e}let Ze=!1;function or(e){Ze=e}let k=null,be=!1;function se(e){k=e}let j=null;function xe(e){j=e}let Ee=null;function Si(e){k!==null&&(Ee===null?Ee=[e]:Ee.push(e))}let te=null,oe=0,ue=null;function Ei(e){ue=e}let Gr=1,Dt=0,Ye=Dt;function lr(e){Ye=e}function Kr(){return++Gr}function ht(e){var t=e.f;if((t&ae)!==0)return!0;if(t&J&&(e.f&=~ze),(t&me)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s];if(ht(i)&&Ar(i),i.wv>e.wv)return!0}(t&_e)!==0&&de===null&&Z(e,K)}return!1}function Wr(e,t,n=!0){var r=e.reactions;if(r!==null&&!Ee?.includes(e))for(var s=0;s<r.length;s++){var i=r[s];(i.f&J)!==0?Wr(i,t,!1):t===i&&(n?Z(i,ae):(i.f&K)!==0&&Z(i,me),Ge(i))}}function Zr(e){var t=te,n=oe,r=ue,s=k,i=Ee,l=q,f=be,u=Ye,c=e.f;te=null,oe=0,ue=null,k=(c&(Pe|We))===0?e:null,Ee=null,it(e.ctx),be=!1,Ye=++Dt,e.ac!==null&&(Dn(()=>{e.ac.abort(et)}),e.ac=null);try{e.f|=yn;var d=e.fn,p=d(),h=e.deps;if(te!==null){var _;if(Wt(e,oe),h!==null&&oe>0)for(h.length=oe+te.length,_=0;_<te.length;_++)h[oe+_]=te[_];else e.deps=h=te;if(Rt()&&(e.f&_e)!==0)for(_=oe;_<h.length;_++)(h[_].reactions??=[]).push(e)}else h!==null&&oe<h.length&&(Wt(e,oe),h.length=oe);if(dt()&&ue!==null&&!be&&h!==null&&(e.f&(J|me|ae))===0)for(_=0;_<ue.length;_++)Wr(ue[_],e);return s!==null&&s!==e&&(Dt++,ue!==null&&(r===null?r=ue:r.push(...ue))),(e.f&Oe)!==0&&(e.f^=Oe),p}catch(S){return Tr(S)}finally{e.f^=yn,te=t,oe=n,ue=r,k=s,Ee=i,it(l),be=f,Ye=u}}function Ti(e,t){let n=t.reactions;if(n!==null){var r=Vs.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&J)!==0&&(te===null||!te.includes(t))&&(Z(t,me),(t.f&_e)!==0&&(t.f^=_e,t.f&=~ze),Cr(t),Wt(t,0))}function Wt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Ti(e,n[r])}function ut(e){var t=e.f;if((t&Se)===0){Z(e,K);var n=j,r=Ue;j=e,Ue=!0;try{(t&(Te|Hs))!==0?wi(e):Br(e),Hr(e);var s=Zr(e);e.teardown=typeof s=="function"?s:null,e.wv=Gr;var i;_n&&xs&&(e.f&ae)!==0&&e.deps}finally{Ue=r,j=n}}}async function Pi(){await Promise.resolve(),ni()}function a(e){var t=e.f,n=(t&J)!==0;if(k!==null&&!be){var r=j!==null&&(j.f&Se)!==0;if(!r&&!Ee?.includes(e)){var s=k.deps;if((k.f&yn)!==0)e.rv<Dt&&(e.rv=Dt,te===null&&s!==null&&s[oe]===e?oe++:te===null?te=[e]:te.includes(e)||te.push(e));else{(k.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[k]:i.includes(k)||i.push(k)}}}if(Ze){if(Ve.has(e))return Ve.get(e);if(n){var l=e,f=l.v;return((l.f&K)===0&&l.reactions!==null||Xr(l))&&(f=Rn(l)),Ve.set(l,f),f}}else n&&(!de?.has(e)||L?.is_fork&&!Rt())&&(l=e,ht(l)&&Ar(l),Ue&&Rt()&&(l.f&_e)===0&&Jr(l));if(de?.has(e))return de.get(e);if((e.f&Oe)!==0)throw e.v;return e.v}function Jr(e){if(e.deps!==null){e.f^=_e;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&J)!==0&&(t.f&_e)===0&&Jr(t)}}function Xr(e){if(e.v===Q)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ve.has(t)||(t.f&J)!==0&&Xr(t))return!0;return!1}function g(e){var t=be;try{return be=!0,e()}finally{be=t}}const Ri=-7169;function Z(e,t){e.f=e.f&Ri|t}function x(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(rt in e)wn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&rt in n&&wn(n)}}}function wn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{wn(e[r],t)}catch{}const n=En(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=mr(n);for(let s in r){const i=r[s].get;if(i)try{i.call(e)}catch{}}}}}const Qr=new Set,Mn=new Set;function An(e){for(var t=0;t<e.length;t++)Qr.add(e[t]);for(var n of Mn)n(e)}let ur=null;function qt(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;ur=e;var l=0,f=ur===e&&e.__root;if(f){var u=s.indexOf(f);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;u<=c&&(l=u)}if(i=s[l]||e.target,i!==t){Is(e,"currentTarget",{configurable:!0,get(){return i||n}});var d=k,p=j;se(null),xe(null);try{for(var h,_=[];i!==null;){var S=i.assignedSlot||i.parentNode||i.host||null;try{var R=i["__"+r];R!=null&&(!i.disabled||e.target===i)&&R.call(i,e)}catch(y){h?_.push(y):h=y}if(e.cancelBubble||S===t||S===null)break;i=S}if(h){for(let y of _)queueMicrotask(()=>{throw y});throw h}}finally{e.__root=t,delete e.currentTarget,se(d),xe(p)}}}function $r(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Zt(e,t){var n=j;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function X(e,t){var n=(t&ks)!==0,r=(t&Ns)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=$r(i?e:"<!>"+e),n||(s=lt(s)));var l=r||Or?document.importNode(s,!0):s.cloneNode(!0);if(n){var f=lt(l),u=l.lastChild;Zt(f,u)}else Zt(l,l);return l}}function Di(e,t,n="svg"){var r=!e.startsWith("<!>"),s=`<${n}>${r?e:"<!>"+e}</${n}>`,i;return()=>{if(!i){var l=$r(s),f=lt(l);i=lt(f)}var u=i.cloneNode(!0);return Zt(u,u),u}}function kn(e,t){return Di(e,t,"svg")}function es(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ie();return e.append(t,n),Zt(t,n),e}function Y(e,t){e!==null&&e.before(t)}const Ci=["touchstart","touchmove"];function Ai(e){return Ci.includes(e)}function V(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ki(e,t){return Ni(e,t)}const $e=new Map;function Ni(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:l=!0}){hi();var f=new Set,u=p=>{for(var h=0;h<p.length;h++){var _=p[h];if(!f.has(_)){f.add(_);var S=Ai(_);t.addEventListener(_,qt,{passive:S});var R=$e.get(_);R===void 0?(document.addEventListener(_,qt,{passive:S}),$e.set(_,1)):$e.set(_,R+1)}}};u(Jt(Qr)),Mn.add(u);var c=void 0,d=bi(()=>{var p=n??t.appendChild(Ie());return ai(p,{pending:()=>{}},h=>{if(i){Fe({});var _=q;_.c=i}s&&(r.$$events=s),c=e(h,r)||{},i&&je()}),()=>{for(var h of f){t.removeEventListener(h,qt);var _=$e.get(h);--_===0?(document.removeEventListener(h,qt),$e.delete(h)):$e.set(h,_)}Mn.delete(u),p!==n&&p.parentNode?.removeChild(p)}});return Oi.set(c,d),c}let Oi=new WeakMap;class ts{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#i=()=>{var t=L;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Cn(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===t)break;const f=this.#r.get(l);f&&(ie(f.effect),this.#r.delete(l))}for(const[i,l]of this.#t){if(i===n||this.#n.has(i))continue;const f=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();zr(l,c),c.append(Ie()),this.#r.set(i,{effect:l,fragment:c})}else ie(l);this.#n.delete(i),this.#t.delete(i)};this.#l||!r?(this.#n.add(i),qe(l,f,!1)):f()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(ie(s.effect),this.#r.delete(r))};ensure(t,n){var r=L,s=Fr();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var i=document.createDocumentFragment(),l=Ie();i.append(l),this.#r.set(t,{effect:ce(()=>n(l)),fragment:i})}else this.#t.set(t,ce(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[f,u]of this.#t)f===t?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[f,u]of this.#r)f===t?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#i),r.ondiscard(this.#s)}else this.#i()}}function ns(e){q===null&&wr(),ft&&q.l!==null?Ii(q).m.push(e):xn(()=>{const t=g(e);if(typeof t=="function")return t})}function Vi(e){q===null&&wr(),ns(()=>()=>g(e))}function Ii(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}function pe(e,t,n=!1){var r=new ts(e),s=n?st:0;function i(l,f){r.ensure(l,f)}sn(()=>{var l=!1;t((f,u=!0)=>{l=!0,i(u,f)}),l||i(!1,null)},s)}function Fi(e,t,n){var r=new ts(e),s=!dt();sn(()=>{var i=t();s&&i!==null&&typeof i=="object"&&(i={}),r.ensure(i,n)})}function Nn(e,t){return t}function ji(e,t,n){for(var r=[],s=t.length,i,l=t.length,f=0;f<s;f++){let p=t[f];qe(p,()=>{if(i){if(i.pending.delete(p),i.done.add(p),i.pending.size===0){var h=e.outrogroups;Sn(Jt(i.done)),h.delete(i),h.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=r.length===0&&n!==null;if(u){var c=n,d=c.parentNode;vi(d),d.append(c),e.items.clear()}Sn(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Sn(e,t=!0){for(var n=0;n<e.length;n++)ie(e[n],t)}var fr;function On(e,t,n,r,s,i=null){var l=e,f=new Map,u=(t&pr)!==0;if(u){var c=e;l=c.appendChild(Ie())}var d=null,p=Ne(()=>{var M=n();return _r(M)?M:M==null?[]:Jt(M)}),h,_=!0;function S(){y.fallback=d,Li(y,h,l,t,r),d!==null&&(h.length===0?(d.f&Me)===0?Cn(d):(d.f^=Me,Et(d,null,l)):qe(d,()=>{d=null}))}var R=sn(()=>{h=a(p);for(var M=h.length,C=new Set,b=L,T=Fr(),D=0;D<M;D+=1){var B=h[D],o=r(B,D),w=_?null:f.get(o);w?(w.v&&ot(w.v,B),w.i&&ot(w.i,D),T&&b.skipped_effects.delete(w.e)):(w=Hi(f,_?l:fr??=Ie(),B,o,D,s,t,n),_||(w.e.f|=Me),f.set(o,w)),C.add(o)}if(M===0&&i&&!d&&(_?d=ce(()=>i(l)):(d=ce(()=>i(fr??=Ie())),d.f|=Me)),!_)if(T){for(const[N,F]of f)C.has(N)||b.skipped_effects.add(F.e);b.oncommit(S),b.ondiscard(()=>{})}else S();a(p)}),y={effect:R,items:f,outrogroups:null,fallback:d};_=!1}function Li(e,t,n,r,s){var i=(r&Es)!==0,l=t.length,f=e.items,u=e.effect.first,c,d=null,p,h=[],_=[],S,R,y,M;if(i)for(M=0;M<l;M+=1)S=t[M],R=s(S,M),y=f.get(R).e,(y.f&Me)===0&&(y.nodes?.a?.measure(),(p??=new Set).add(y));for(M=0;M<l;M+=1){if(S=t[M],R=s(S,M),y=f.get(R).e,e.outrogroups!==null)for(const F of e.outrogroups)F.pending.delete(y),F.done.delete(y);if((y.f&Me)!==0)if(y.f^=Me,y===u)Et(y,null,n);else{var C=d?d.next:u;y===e.effect.last&&(e.effect.last=y.prev),y.prev&&(y.prev.next=y.next),y.next&&(y.next.prev=y.prev),ke(e,d,y),ke(e,y,C),Et(y,C,n),d=y,h=[],_=[],u=d.next;continue}if((y.f&le)!==0&&(Cn(y),i&&(y.nodes?.a?.unfix(),(p??=new Set).delete(y))),y!==u){if(c!==void 0&&c.has(y)){if(h.length<_.length){var b=_[0],T;d=b.prev;var D=h[0],B=h[h.length-1];for(T=0;T<h.length;T+=1)Et(h[T],b,n);for(T=0;T<_.length;T+=1)c.delete(_[T]);ke(e,D.prev,B.next),ke(e,d,D),ke(e,B,b),u=b,d=B,M-=1,h=[],_=[]}else c.delete(y),Et(y,u,n),ke(e,y.prev,y.next),ke(e,y,d===null?e.effect.first:d.next),ke(e,d,y),d=y;continue}for(h=[],_=[];u!==null&&u!==y;)(c??=new Set).add(u),_.push(u),u=u.next;if(u===null)continue}(y.f&Me)===0&&h.push(y),d=y,u=y.next}if(e.outrogroups!==null){for(const F of e.outrogroups)F.pending.size===0&&(Sn(Jt(F.done)),e.outrogroups?.delete(F));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||c!==void 0){var o=[];if(c!==void 0)for(y of c)(y.f&le)===0&&o.push(y);for(;u!==null;)(u.f&le)===0&&u!==e.fallback&&o.push(u),u=u.next;var w=o.length;if(w>0){var N=(r&pr)!==0&&l===0?n:null;if(i){for(M=0;M<w;M+=1)o[M].nodes?.a?.measure();for(M=0;M<w;M+=1)o[M].nodes?.a?.fix()}ji(e,o,N)}}i&&$t(()=>{if(p!==void 0)for(y of p)y.nodes?.a?.apply()})}function Hi(e,t,n,r,s,i,l,f){var u=(l&Ms)!==0?(l&Ts)===0?z(n,!1,!1):Ke(n):null,c=(l&Ss)!==0?Ke(s):null;return{v:u,i:c,e:ce(()=>(i(t,u??n,c??s,f),()=>{e.delete(r)}))}}function Et(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,i=t&&(t.f&Me)===0?t.nodes.start:n;r!==null;){var l=Ct(r);if(i.before(r),r===s)return;r=l}}function ke(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}const cr=[...` 	
\r\fÂ \v\uFEFF`];function Bi(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,l=0;(l=r.indexOf(s,l))>=0;){var f=l+i;(l===0||cr.includes(r[l-1]))&&(f===r.length||cr.includes(r[f]))?r=(l===0?"":r.substring(0,l))+r.substring(f+1):l=f}}return r===""?null:r}function qi(e,t){return e==null?null:String(e)}function $(e,t,n,r,s,i){var l=e.__className;if(l!==n||l===void 0){var f=Bi(n,r,i);f==null?e.removeAttribute("class"):t?e.className=f:e.setAttribute("class",f),e.__className=n}else if(i&&s!==i)for(var u in i){var c=!!i[u];(s==null||c!==!!s[u])&&e.classList.toggle(u,c)}return i}function Ui(e,t,n,r){var s=e.__style;if(s!==t){var i=qi(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return r}const Yi=Symbol("is custom element"),zi=Symbol("is html");function re(e,t,n,r){var s=Gi(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[qs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Ki(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Gi(e){return e.__attributes??={[Yi]:e.nodeName.includes("-"),[zi]:e.namespaceURI===Os}}var dr=new Map;function Ki(e){var t=e.getAttribute("is")||e.nodeName,n=dr.get(t);if(n)return n;dr.set(t,n=[]);for(var r,s=e,i=Element.prototype;i!==s;){r=mr(s);for(var l in r)r[l].set&&n.push(l);s=En(s)}return n}function G(e,t,n=t){var r=new WeakSet;_i(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=vn(e)?pn(i):i,n(i),L!==null&&r.add(L),await Pi(),i!==(i=t())){var l=e.selectionStart,f=e.selectionEnd,u=e.value.length;if(e.value=i??"",f!==null){var c=e.value.length;l===f&&f===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=l,e.selectionEnd=Math.min(f,c))}}}),g(t)==null&&e.value&&(n(vn(e)?pn(e.value):e.value),L!==null&&r.add(L)),rn(()=>{var s=t();if(e===document.activeElement){var i=Yt??L;if(r.has(i))return}vn(e)&&s===pn(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function vn(e){var t=e.type;return t==="number"||t==="range"}function pn(e){return e===""?null:+e}function Je(e=!1){const t=q,n=t.l.u;if(!n)return;let r=()=>x(t.s);if(e){let s=0,i={};const l=tn(()=>{let f=!1;const u=t.s;for(const c in u)u[c]!==i[c]&&(i[c]=u[c],f=!0);return f&&s++,s});r=()=>a(l)}n.b.length&&gi(()=>{hr(t,r),mn(n.b)}),xn(()=>{const s=g(()=>n.m.map(Ls));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&xn(()=>{hr(t,r),mn(n.a)})}function hr(e,t){if(e.l.s)for(const n of e.l.s)a(n);t()}let Ut=!1;function Wi(e){var t=Ut;try{return Ut=!1,[e(),Ut]}finally{Ut=t}}function E(e,t,n,r){var s=!ft||(n&Rs)!==0,i=(n&Cs)!==0,l=(n&As)!==0,f=r,u=!0,c=()=>(u&&(u=!1,f=l?g(r):r),f),d;if(i){var p=rt in e||Bs in e;d=nt(e,t)?.set??(p&&t in e?b=>e[t]=b:void 0)}var h,_=!1;i?[h,_]=Wi(()=>e[t]):h=e[t],h===void 0&&r!==void 0&&(h=c(),d&&(s&&Ws(),d(h)));var S;if(s?S=()=>{var b=e[t];return b===void 0?c():(u=!0,b)}:S=()=>{var b=e[t];return b!==void 0&&(f=void 0),b===void 0?f:b},s&&(n&Ds)===0)return S;if(d){var R=e.$$legacy;return(function(b,T){return arguments.length>0?((!s||!T||R||_)&&d(T?S():b),b):S()})}var y=!1,M=((n&Ps)!==0?tn:Ne)(()=>(y=!1,S()));i&&a(M);var C=j;return(function(b,T){if(arguments.length>0){const D=T?a(M):s&&i?tt(b):b;return P(M,D),y=!0,f!==void 0&&(f=D),b}return Ze&&y||(C.f&Se)!==0?M.v:a(M)})}function rs(){return{currentChord:"I",currentMeasure:1,currentStep:0,isMinorChord:!1,progressionName:"",progressionLength:4,harmonyMode:1,primarySteps:16,primaryPulses:4,primaryRotation:0,primaryPattern:[],secondarySteps:12,secondaryPulses:3,secondaryRotation:0,secondaryPattern:[],isEmotionMode:!0,arousal:.5,valence:.3,density:.5,tension:.3,bpm:120,rhythmMode:0,enableRhythm:!0,enableHarmony:!0,enableMelody:!0,enableVoicing:!1,rhythmDensity:.5,rhythmTension:.3,harmonyTension:.3,harmonyValence:.3,melodySmoothness:.7,voicingDensity:.5,voicingTension:.3,channelMuted:[!1,!1,!1,!1],channelGains:[.6,1,.5,.4],key:"C",scale:"major"}}class Zi{subscribers=new Set;currentState=rs();connected=!1;previousOnPluginMessage;async connect(){this.previousOnPluginMessage=window.onPluginMessage,window.onPluginMessage=t=>{this.handleMessage(t),this.previousOnPluginMessage&&this.previousOnPluginMessage(t)},this.connected=!0,this.postMessage({type:"action",method:"init"})}disconnect(){window.onPluginMessage=this.previousOnPluginMessage,this.connected=!1}isConnected(){return this.connected}handleMessage=t=>{try{const n=t;if(n.type==="state_update"&&n.data){const r=n;this.currentState={...this.currentState,...r.data},this.subscribers.forEach(s=>s(this.currentState))}}catch(n){console.error("[VstBridge] Error handling message:",n,t)}};postMessage(t){window.sendToPlugin?window.sendToPlugin(t):window.ipc?.postMessage?window.ipc.postMessage(JSON.stringify(t)):console.warn("[VstBridge] No IPC available, message not sent:",t)}useEmotionMode(){this.postMessage({type:"action",method:"use_emotion_mode"}),this.currentState.isEmotionMode=!0}useDirectMode(){this.postMessage({type:"action",method:"use_direct_mode"}),this.currentState.isEmotionMode=!1}setArousal(t){this.postMessage({type:"set",method:"set_arousal",params:{value:t}}),this.currentState.arousal=t}setValence(t){this.postMessage({type:"set",method:"set_valence",params:{value:t}}),this.currentState.valence=t}setDensity(t){this.postMessage({type:"set",method:"set_density",params:{value:t}}),this.currentState.density=t}setTension(t){this.postMessage({type:"set",method:"set_tension",params:{value:t}}),this.currentState.tension=t}setAlgorithm(t){this.postMessage({type:"set",method:"set_algorithm",params:{mode:t}})}setHarmonyMode(t){this.postMessage({type:"set",method:"set_harmony_mode",params:{mode:t}})}setPolySteps(t){this.postMessage({type:"set",method:"set_poly_steps",params:{steps:t}})}setDirectBpm(t){this.postMessage({type:"set",method:"set_direct_bpm",params:{value:t}})}setDirectEnableRhythm(t){this.postMessage({type:"set",method:"set_direct_enable_rhythm",params:{enabled:t}})}setDirectEnableHarmony(t){this.postMessage({type:"set",method:"set_direct_enable_harmony",params:{enabled:t}})}setDirectEnableMelody(t){this.postMessage({type:"set",method:"set_direct_enable_melody",params:{enabled:t}})}setDirectEnableVoicing(t){this.postMessage({type:"set",method:"set_direct_enable_voicing",params:{enabled:t}})}setDirectRhythmMode(t){this.postMessage({type:"set",method:"set_direct_rhythm_mode",params:{mode:t}})}setDirectRhythmSteps(t){this.postMessage({type:"set",method:"set_direct_rhythm_steps",params:{steps:t}})}setDirectRhythmPulses(t){this.postMessage({type:"set",method:"set_direct_rhythm_pulses",params:{pulses:t}})}setDirectRhythmRotation(t){this.postMessage({type:"set",method:"set_direct_rhythm_rotation",params:{rotation:t}})}setDirectRhythmDensity(t){this.postMessage({type:"set",method:"set_direct_rhythm_density",params:{density:t}})}setDirectRhythmTension(t){this.postMessage({type:"set",method:"set_direct_rhythm_tension",params:{tension:t}})}setDirectSecondarySteps(t){this.postMessage({type:"set",method:"set_direct_secondary_steps",params:{steps:t}})}setDirectSecondaryPulses(t){this.postMessage({type:"set",method:"set_direct_secondary_pulses",params:{pulses:t}})}setDirectSecondaryRotation(t){this.postMessage({type:"set",method:"set_direct_secondary_rotation",params:{rotation:t}})}setDirectHarmonyTension(t){this.postMessage({type:"set",method:"set_direct_harmony_tension",params:{tension:t}})}setDirectHarmonyValence(t){this.postMessage({type:"set",method:"set_direct_harmony_valence",params:{valence:t}})}setDirectMelodySmoothness(t){this.postMessage({type:"set",method:"set_direct_melody_smoothness",params:{smoothness:t}})}setDirectVoicingDensity(t){this.postMessage({type:"set",method:"set_direct_voicing_density",params:{density:t}})}setDirectVoicingTension(t){this.postMessage({type:"set",method:"set_direct_voicing_tension",params:{tension:t}})}setChannelMuted(t,n){this.postMessage({type:"set",method:"set_channel_muted",params:{channel:t,muted:n}}),this.currentState.channelMuted[t]=n}setChannelRouting(t,n){this.postMessage({type:"set",method:"set_channel_routing",params:{channel:t,routing:n}})}setChannelGain(t,n){this.postMessage({type:"set",method:"set_channel_gain",params:{channel:t,gain:n}}),this.currentState.channelGains[t]=n}subscribe(t){return this.subscribers.add(t),t(this.currentState),()=>{this.subscribers.delete(t)}}getState(){return this.connected?{...this.currentState}:null}}var Ji=X('<div class="emotional-controls space-y-6"><div class="p-5 bg-neutral-900 rounded-lg border-l-4 border-purple-600"><div class="flex justify-between items-center"><span class="text-xl font-semibold">BPM</span> <span class="text-4xl font-mono text-purple-400"> </span></div> <p class="text-sm text-neutral-500 mt-2">Calculated from Arousal</p></div> <div class="py-2"><div class="flex justify-between mb-3"><label for="arousal" class="text-xl font-semibold">Arousal</label> <span class="text-lg text-purple-400 font-mono"> </span></div> <input id="arousal" type="range" min="0" max="1" step="0.01" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-red-600"/> <div class="text-sm text-neutral-500 mt-2 text-right">Energy / Tempo</div></div> <div class="py-2"><div class="flex justify-between mb-3"><label for="valence" class="text-xl font-semibold">Valence</label> <span class="text-lg text-purple-400 font-mono"> </span></div> <input id="valence" type="range" min="-1" max="1" step="0.01" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-600"/> <div class="text-sm text-neutral-500 mt-2 text-right">Emotion / Harmony</div></div> <div class="py-2"><div class="flex justify-between mb-3"><label for="density" class="text-xl font-semibold">Density</label> <span class="text-lg text-purple-400 font-mono"> </span></div> <input id="density" type="range" min="0" max="1" step="0.01" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-blue-600"/> <div class="text-sm text-neutral-500 mt-2 text-right">Rhythm Complexity</div></div> <div class="py-2"><div class="flex justify-between mb-3"><label for="tension" class="text-xl font-semibold">Tension</label> <span class="text-lg text-purple-400 font-mono"> </span></div> <input id="tension" type="range" min="0" max="1" step="0.01" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-yellow-600"/> <div class="text-sm text-neutral-500 mt-2 text-right">Dissonance / Rotation</div></div></div>');function Xi(e,t){Fe(t,!1);const n=z();let r=E(t,"bridge",8),s=E(t,"arousal",8,.5),i=E(t,"valence",8,.3),l=E(t,"density",8,.5),f=E(t,"tension",8,.3),u=z(s()),c=z(i()),d=z(l()),p=z(f()),h=z(null),_=null;function S(ne){P(h,ne),_&&clearTimeout(_),_=setTimeout(()=>{P(h,null)},500)}function R(){S("arousal"),r().setArousal(a(u))}function y(){S("valence"),r().setValence(a(c))}function M(){S("density"),r().setDensity(a(d))}function C(){S("tension"),r().setTension(a(p))}ve(()=>(a(h),x(s())),()=>{a(h)!=="arousal"&&P(u,s())}),ve(()=>(a(h),x(i())),()=>{a(h)!=="valence"&&P(c,i())}),ve(()=>(a(h),x(l())),()=>{a(h)!=="density"&&P(d,l())}),ve(()=>(a(h),x(f())),()=>{a(h)!=="tension"&&P(p,f())}),ve(()=>a(u),()=>{P(n,70+a(u)*110)}),nn(),Je();var b=Ji(),T=v(b),D=v(T),B=m(v(D),2),o=v(B),w=m(T,2),N=v(w),F=m(v(N),2),A=v(F),I=m(N,2);I.__input=R;var H=m(w,2),ee=v(H),De=m(v(ee),2),Xe=v(De),vt=m(ee,2);vt.__input=y;var At=m(H,2),Qe=v(At),pt=m(v(Qe),2),_t=v(pt),mt=m(Qe,2);mt.__input=M;var kt=m(At,2),yt=v(kt),an=m(v(yt),2),on=v(an),gt=m(yt,2);gt.__input=C,W((ne,Nt,bt,Ot,ln)=>{V(o,ne),V(A,Nt),V(Xe,bt),V(_t,Ot),V(on,ln)},[()=>(a(n),g(()=>a(n).toFixed(0))),()=>(a(u),g(()=>a(u).toFixed(2))),()=>(a(c),g(()=>a(c).toFixed(2))),()=>(a(d),g(()=>a(d).toFixed(2))),()=>(a(p),g(()=>a(p).toFixed(2)))]),G(I,()=>a(u),ne=>P(u,ne)),G(vt,()=>a(c),ne=>P(c,ne)),G(mt,()=>a(d),ne=>P(d,ne)),G(gt,()=>a(p),ne=>P(p,ne)),Y(e,b),je()}An(["input"]);var Qi=X('<p class="text-xs text-neutral-500 mb-4">Bjorklund algorithm - Classic polyrhythms</p> <div class="mb-4 p-3 bg-neutral-800/50 rounded-lg"><div class="text-xs text-orange-300 font-semibold mb-2">Primary (Kick)</div> <div class="grid grid-cols-3 gap-3"><div><span class="text-xs text-neutral-400"> </span> <input type="range" min="4" max="32" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-orange-500"/></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="1" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-orange-500"/></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-orange-500"/></div></div></div> <div class="p-3 bg-neutral-800/50 rounded-lg border border-green-500/30"><div class="text-xs text-green-300 font-semibold mb-2">Secondary (Snare) - Polyrhythm</div> <div class="grid grid-cols-3 gap-3"><div><span class="text-xs text-neutral-400"> </span> <input type="range" min="4" max="32" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="1" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" step="1" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/></div></div> <p class="text-xs text-neutral-600 mt-2"> </p></div>',1),$i=X("<button> </button>"),ea=X('<p class="text-xs text-neutral-500 mb-4">Real drum grooves - Density controls complexity</p> <div class="mb-4"><span class="text-xs text-neutral-400 mb-2 block">Resolution (steps per measure)</span> <div class="flex gap-2"></div></div> <div class="grid grid-cols-2 gap-4"><div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-purple-500"/> <div class="flex justify-between text-xs text-neutral-600 mt-1"><span>Half-time</span> <span>Breakbeat</span></div></div> <div><span class="text-xs text-neutral-400"> </span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-purple-500"/> <div class="flex justify-between text-xs text-neutral-600 mt-1"><span>Clean</span> <span>Ghost notes</span></div></div></div>',1),ta=X('<div class="technical-controls space-y-6"><div class="p-5 bg-neutral-900 rounded-lg"><h3 class="text-base font-semibold text-neutral-400 mb-4">Modules</h3> <div class="flex gap-3"><button>Rhythm</button> <button>Harmony</button> <button>Melody</button> <button>Voicing</button></div></div> <div class="py-2"><div class="flex justify-between mb-3"><span class="text-xl font-semibold">BPM</span> <span class="text-lg text-cyan-400 font-mono"> </span></div> <input type="range" min="30" max="200" step="1" class="w-full h-3 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-cyan-600"/></div> <div class="p-5 bg-neutral-900/50 rounded-lg border-l-4 border-orange-500"><h3 class="text-lg font-semibold text-orange-400 mb-4">Rhythm</h3> <div class="flex rounded-lg bg-neutral-800 p-1.5 mb-5"><button>Euclidean</button> <button>PerfectBalance</button></div> <!></div> <div class="p-5 bg-neutral-900/50 rounded-lg border-l-4 border-green-500"><h3 class="text-lg font-semibold text-green-400 mb-4">Harmony</h3> <div class="flex rounded-lg bg-neutral-800 p-1.5 mb-4"><button>Basic</button> <button>Driver</button></div> <p class="text-xs text-neutral-500 mb-4 text-center"> </p> <div class="grid grid-cols-2 gap-6"><div><span class="text-sm text-neutral-400 mb-2 block"> </span> <input type="range" min="-1" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Minor</span> <span>Major</span></div></div> <div><span class="text-sm text-neutral-400 mb-2 block"> </span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Consonant</span> <span>Dissonant</span></div></div></div></div> <div class="p-5 bg-neutral-900/50 rounded-lg border-l-4 border-blue-500"><h3 class="text-lg font-semibold text-blue-400 mb-4">Melody & Voicing</h3> <div class="grid grid-cols-3 gap-5"><div><span class="text-sm text-neutral-400 mb-2 block">Smoothness</span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-blue-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Erratic</span> <span>Smooth</span></div></div> <div><span class="text-sm text-neutral-400 mb-2 block">Density</span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-blue-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Sparse</span> <span>Dense</span></div></div> <div><span class="text-sm text-neutral-400 mb-2 block">Filter</span> <input type="range" min="0" max="1" step="0.01" class="w-full h-2.5 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-blue-500"/> <div class="flex justify-between text-xs text-neutral-500 mt-2"><span>Muffled</span> <span>Bright</span></div></div></div></div></div>');function na(e,t){Fe(t,!1);let n=E(t,"bridge",8),r=E(t,"state",8),s=E(t,"enableRhythm",8,!0),i=E(t,"enableHarmony",8,!0),l=E(t,"enableMelody",8,!0),f=E(t,"enableVoicing",8,!1),u=E(t,"bpm",8,120),c=E(t,"rhythmMode",8,0),d=E(t,"rhythmSteps",8,16),p=E(t,"rhythmPulses",8,4),h=E(t,"rhythmRotation",8,0),_=E(t,"rhythmDensity",8,.5),S=E(t,"rhythmTension",8,.3),R=E(t,"secondarySteps",8,12),y=E(t,"secondaryPulses",8,3),M=E(t,"secondaryRotation",8,0),C=E(t,"harmonyValence",8,.3),b=E(t,"harmonyTension",8,.3),T=E(t,"melodySmoothness",8,.7),D=E(t,"voicingDensity",8,.5),B=E(t,"voicingTension",8,.3),o=z({enableRhythm:s(),enableHarmony:i(),enableMelody:l(),enableVoicing:f(),bpm:u(),rhythmMode:c(),rhythmSteps:d(),rhythmPulses:p(),rhythmRotation:h(),rhythmDensity:_(),rhythmTension:S(),secondarySteps:R(),secondaryPulses:y(),secondaryRotation:M(),harmonyValence:C(),harmonyTension:b(),melodySmoothness:T(),voicingDensity:D(),voicingTension:B()}),w=z(!1),N=null;function F(){P(w,!0),N&&clearTimeout(N),N=setTimeout(()=>{P(w,!1)},500)}function A(){F(),n().setDirectBpm(a(o).bpm),n().setDirectEnableRhythm(a(o).enableRhythm),n().setDirectEnableHarmony(a(o).enableHarmony),n().setDirectEnableMelody(a(o).enableMelody),n().setDirectEnableVoicing(a(o).enableVoicing),n().setDirectRhythmMode(a(o).rhythmMode),n().setDirectRhythmSteps(a(o).rhythmSteps),n().setDirectRhythmPulses(a(o).rhythmPulses),n().setDirectRhythmRotation(a(o).rhythmRotation),n().setDirectRhythmDensity(a(o).rhythmDensity),n().setDirectRhythmTension(a(o).rhythmTension),n().setDirectSecondarySteps(a(o).secondarySteps),n().setDirectSecondaryPulses(a(o).secondaryPulses),n().setDirectSecondaryRotation(a(o).secondaryRotation),n().setDirectHarmonyTension(a(o).harmonyTension),n().setDirectHarmonyValence(a(o).harmonyValence),n().setDirectMelodySmoothness(a(o).melodySmoothness),n().setDirectVoicingDensity(a(o).voicingDensity),n().setDirectVoicingTension(a(o).voicingTension)}function I(O){F(),O==="rhythm"?U(o,a(o).enableRhythm=!a(o).enableRhythm):O==="harmony"?U(o,a(o).enableHarmony=!a(o).enableHarmony):O==="melody"?U(o,a(o).enableMelody=!a(o).enableMelody):O==="voicing"&&U(o,a(o).enableVoicing=!a(o).enableVoicing),A()}function H(O){F(),U(o,a(o).rhythmMode=O),U(o,a(o).rhythmSteps=O===0?16:48),A()}function ee(O){F(),U(o,a(o).rhythmSteps=O),A()}function De(O){n().setHarmonyMode(O)}ve(()=>(a(w),x(s()),x(i()),x(l()),x(f()),x(u()),x(c()),x(d()),x(p()),x(h()),x(_()),x(S()),x(R()),x(y()),x(M()),x(C()),x(b()),x(T()),x(D()),x(B())),()=>{a(w)||P(o,{enableRhythm:s(),enableHarmony:i(),enableMelody:l(),enableVoicing:f(),bpm:u(),rhythmMode:c(),rhythmSteps:d(),rhythmPulses:p(),rhythmRotation:h(),rhythmDensity:_(),rhythmTension:S(),secondarySteps:R(),secondaryPulses:y(),secondaryRotation:M(),harmonyValence:C(),harmonyTension:b(),melodySmoothness:T(),voicingDensity:D(),voicingTension:B()})}),nn(),Je();var Xe=ta(),vt=v(Xe),At=m(v(vt),2),Qe=v(At);Qe.__click=()=>I("rhythm");var pt=m(Qe,2);pt.__click=()=>I("harmony");var _t=m(pt,2);_t.__click=()=>I("melody");var mt=m(_t,2);mt.__click=()=>I("voicing");var kt=m(vt,2),yt=v(kt),an=m(v(yt),2),on=v(an),gt=m(yt,2);gt.__input=A;var ne=m(kt,2),Nt=m(v(ne),2),bt=v(Nt);bt.__click=()=>H(0);var Ot=m(bt,2);Ot.__click=()=>H(1);var ln=m(Nt,2);{var ss=O=>{var Le=Qi(),xt=m(Gt(Le),2),fn=m(v(xt),2),Vt=v(fn),wt=v(Vt),It=v(wt),Ft=m(wt,2);Ft.__input=A;var Mt=m(Vt,2),jt=v(Mt),Lt=v(jt),St=m(jt,2);St.__input=A;var Ht=m(Mt,2),ye=v(Ht),He=v(ye),Ce=m(ye,2);Ce.__input=A;var cn=m(xt,2),Zn=m(v(cn),2),Jn=v(Zn),Xn=v(Jn),vs=v(Xn),Qn=m(Xn,2);Qn.__input=A;var $n=m(Jn,2),er=v($n),ps=v(er),dn=m(er,2);dn.__input=A;var _s=m($n,2),tr=v(_s),ms=v(tr),hn=m(tr,2);hn.__input=A;var ys=m(Zn,2),gs=v(ys);W(()=>{V(It,`Steps: ${a(o),g(()=>a(o).rhythmSteps)??""}`),V(Lt,`Pulses: ${a(o),g(()=>a(o).rhythmPulses)??""}`),re(St,"max",(a(o),g(()=>a(o).rhythmSteps))),V(He,`Rotation: ${a(o),g(()=>a(o).rhythmRotation)??""}`),re(Ce,"max",(a(o),g(()=>a(o).rhythmSteps-1))),V(vs,`Steps: ${a(o),g(()=>a(o).secondarySteps)??""}`),V(ps,`Pulses: ${a(o),g(()=>a(o).secondaryPulses)??""}`),re(dn,"max",(a(o),g(()=>a(o).secondarySteps))),V(ms,`Rotation: ${a(o),g(()=>a(o).secondaryRotation)??""}`),re(hn,"max",(a(o),g(()=>a(o).secondarySteps-1))),V(gs,`${a(o),g(()=>a(o).rhythmSteps)??""}:${a(o),g(()=>a(o).secondarySteps)??""} polyrhythm`)}),G(Ft,()=>a(o).rhythmSteps,he=>U(o,a(o).rhythmSteps=he)),G(St,()=>a(o).rhythmPulses,he=>U(o,a(o).rhythmPulses=he)),G(Ce,()=>a(o).rhythmRotation,he=>U(o,a(o).rhythmRotation=he)),G(Qn,()=>a(o).secondarySteps,he=>U(o,a(o).secondarySteps=he)),G(dn,()=>a(o).secondaryPulses,he=>U(o,a(o).secondaryPulses=he)),G(hn,()=>a(o).secondaryRotation,he=>U(o,a(o).secondaryRotation=he)),Y(O,Le)},is=O=>{var Le=ea(),xt=m(Gt(Le),2),fn=m(v(xt),2);On(fn,4,()=>[48,96,192],Nn,(ye,He)=>{var Ce=$i();Ce.__click=()=>ee(He);var cn=v(Ce);W(()=>{$(Ce,1,`flex-1 py-2 px-3 rounded font-mono text-sm transition-colors
                ${a(o),g(()=>a(o).rhythmSteps===He?"bg-purple-600 text-white":"bg-neutral-800 text-neutral-400 hover:bg-neutral-700")??""}`),V(cn,He)}),Y(ye,Ce)});var Vt=m(xt,2),wt=v(Vt),It=v(wt),Ft=v(It),Mt=m(It,2);Mt.__input=A;var jt=m(wt,2),Lt=v(jt),St=v(Lt),Ht=m(Lt,2);Ht.__input=A,W((ye,He)=>{V(Ft,`Density: ${ye??""}`),V(St,`Tension: ${He??""}`)},[()=>(a(o),g(()=>a(o).rhythmDensity.toFixed(2))),()=>(a(o),g(()=>a(o).rhythmTension.toFixed(2)))]),G(Mt,()=>a(o).rhythmDensity,ye=>U(o,a(o).rhythmDensity=ye)),G(Ht,()=>a(o).rhythmTension,ye=>U(o,a(o).rhythmTension=ye)),Y(O,Le)};pe(ln,O=>{a(o),g(()=>a(o).rhythmMode===0)?O(ss):O(is,!1)})}var Vn=m(ne,2),In=m(v(Vn),2),un=v(In);un.__click=()=>De(0);var Fn=m(un,2);Fn.__click=()=>De(1);var jn=m(In,2),as=v(jn),os=m(jn,2),Ln=v(os),Hn=v(Ln),ls=v(Hn),Bn=m(Hn,2);Bn.__input=A;var us=m(Ln,2),qn=v(us),fs=v(qn),Un=m(qn,2);Un.__input=A;var cs=m(Vn,2),ds=m(v(cs),2),Yn=v(ds),zn=m(v(Yn),2);zn.__input=A;var Gn=m(Yn,2),Kn=m(v(Gn),2);Kn.__input=A;var hs=m(Gn,2),Wn=m(v(hs),2);Wn.__input=A,W((O,Le)=>{$(Qe,1,`flex-1 py-3 px-4 rounded-lg text-base font-medium transition-colors
          ${a(o),g(()=>a(o).enableRhythm?"bg-orange-600 text-white":"bg-neutral-700 text-neutral-400")??""}`),$(pt,1,`flex-1 py-3 px-4 rounded-lg text-base font-medium transition-colors
          ${a(o),g(()=>a(o).enableHarmony?"bg-green-600 text-white":"bg-neutral-700 text-neutral-400")??""}`),$(_t,1,`flex-1 py-3 px-4 rounded-lg text-base font-medium transition-colors
          ${a(o),g(()=>a(o).enableMelody?"bg-blue-600 text-white":"bg-neutral-700 text-neutral-400")??""}`),$(mt,1,`flex-1 py-3 px-4 rounded-lg text-base font-medium transition-colors
          ${a(o),g(()=>a(o).enableVoicing?"bg-purple-600 text-white":"bg-neutral-700 text-neutral-400")??""}`),V(on,(a(o),g(()=>a(o).bpm))),$(bt,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
          ${a(o),g(()=>a(o).rhythmMode===0?"bg-orange-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`),$(Ot,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
          ${a(o),g(()=>a(o).rhythmMode===1?"bg-purple-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`),$(un,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
          ${x(r()),g(()=>r().harmonyMode===0?"bg-green-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`),$(Fn,1,`flex-1 py-2.5 px-4 rounded-md text-sm font-semibold transition-all duration-200
          ${x(r()),g(()=>r().harmonyMode===1?"bg-cyan-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200")??""}`),V(as,(x(r()),g(()=>r().harmonyMode===0?"Russell Circumplex (I-IV-vi-V)":"Steedman + Neo-Riemannian + LCC"))),V(ls,`Valence: ${O??""}`),V(fs,`Tension: ${Le??""}`)},[()=>(a(o),g(()=>a(o).harmonyValence.toFixed(2))),()=>(a(o),g(()=>a(o).harmonyTension.toFixed(2)))]),G(gt,()=>a(o).bpm,O=>U(o,a(o).bpm=O)),G(Bn,()=>a(o).harmonyValence,O=>U(o,a(o).harmonyValence=O)),G(Un,()=>a(o).harmonyTension,O=>U(o,a(o).harmonyTension=O)),G(zn,()=>a(o).melodySmoothness,O=>U(o,a(o).melodySmoothness=O)),G(Kn,()=>a(o).voicingDensity,O=>U(o,a(o).voicingDensity=O)),G(Wn,()=>a(o).voicingTension,O=>U(o,a(o).voicingTension=O)),Y(e,Xe),je()}An(["click","input"]);var ra=X('<div class="bg-neutral-800 rounded-xl p-6 shadow-xl h-fit sticky top-8"><div class="mb-8"><div class="flex rounded-lg bg-neutral-900 p-1.5"><button>Emotional</button> <button>Technical</button></div> <p class="text-sm text-neutral-500 text-center mt-3"> </p></div> <!></div>');function sa(e,t){Fe(t,!1);let n=E(t,"bridge",8),r=E(t,"state",8),s=z(!0),i=z(!1),l=null;function f(){P(i,!0),l&&clearTimeout(l),l=setTimeout(()=>{P(i,!1)},500),P(s,!a(s)),a(s)?n().useEmotionMode():n().useDirectMode()}ve(()=>(a(i),x(r())),()=>{a(i)||P(s,r().isEmotionMode)}),nn(),Je();var u=ra(),c=v(u),d=v(c),p=v(d);p.__click=()=>{a(s)||f()};var h=m(p,2);h.__click=()=>{a(s)&&f()};var _=m(d,2),S=v(_),R=m(c,2);{var y=C=>{Xi(C,{get bridge(){return n()},get arousal(){return x(r()),g(()=>r().arousal)},get valence(){return x(r()),g(()=>r().valence)},get density(){return x(r()),g(()=>r().density)},get tension(){return x(r()),g(()=>r().tension)}})},M=C=>{na(C,{get bridge(){return n()},get state(){return r()},get enableRhythm(){return x(r()),g(()=>r().enableRhythm)},get enableHarmony(){return x(r()),g(()=>r().enableHarmony)},get enableMelody(){return x(r()),g(()=>r().enableMelody)},get enableVoicing(){return x(r()),g(()=>r().enableVoicing)},get bpm(){return x(r()),g(()=>r().bpm)},get rhythmMode(){return x(r()),g(()=>r().rhythmMode)},get rhythmSteps(){return x(r()),g(()=>r().primarySteps)},get rhythmPulses(){return x(r()),g(()=>r().primaryPulses)},get rhythmRotation(){return x(r()),g(()=>r().primaryRotation)},get rhythmDensity(){return x(r()),g(()=>r().rhythmDensity)},get rhythmTension(){return x(r()),g(()=>r().rhythmTension)},get secondarySteps(){return x(r()),g(()=>r().secondarySteps)},get secondaryPulses(){return x(r()),g(()=>r().secondaryPulses)},get secondaryRotation(){return x(r()),g(()=>r().secondaryRotation)},get harmonyValence(){return x(r()),g(()=>r().harmonyValence)},get harmonyTension(){return x(r()),g(()=>r().harmonyTension)},get melodySmoothness(){return x(r()),g(()=>r().melodySmoothness)},get voicingDensity(){return x(r()),g(()=>r().voicingDensity)},get voicingTension(){return x(r()),g(()=>r().voicingTension)}})};pe(R,C=>{a(s)?C(y):C(M,!1)})}W(()=>{$(p,1,`flex-1 py-3 px-6 rounded-md text-base font-semibold transition-all duration-200
          ${a(s)?"bg-purple-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200"}`),$(h,1,`flex-1 py-3 px-6 rounded-md text-base font-semibold transition-all duration-200
          ${a(s)?"text-neutral-400 hover:text-neutral-200":"bg-cyan-600 text-white shadow-lg"}`),V(S,a(s)?"Russell's Circumplex Model":"Direct Musical Parameters")}),Y(e,u),je()}An(["click"]);var ia=kn("<circle></circle>"),aa=kn('<line x1="50" y1="50" stroke="white" stroke-width="1" stroke-dasharray="2,2" opacity="0.8"></line>'),oa=kn('<text x="50" y="52" text-anchor="middle" font-size="6" font-weight="bold"> </text>'),la=X('<div class="circle-container svelte-ia7egi"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" stroke="#333" stroke-width="0.5" fill="none"></circle><polygon fill-opacity="0.1" stroke-width="1.5"></polygon><!><!><!></svg></div>');function vr(e,t){Fe(t,!1);const n=z(),r=z(),s=z(),i=z();let l=E(t,"steps",8,16),f=E(t,"pulses",8,4),u=E(t,"rotation",8,0),c=E(t,"color",8,"#ff3e00"),d=E(t,"label",8,""),p=E(t,"currentStep",8,0),h=E(t,"radius",8,150),_=E(t,"externalPattern",8,null);function S(o,w){let N=new Array(o).fill(!1);if(o===0)return N;let F=0;for(let A=0;A<o;A++)F+=w,F>=o&&(F-=o,N[A]=!0);return N}ve(()=>(x(_()),x(l()),x(f())),()=>{P(n,_()??S(l(),f()))}),ve(()=>(x(_()),a(n),x(l()),x(u())),()=>{P(r,_()?a(n):[...a(n).slice(l()-u()),...a(n).slice(0,l()-u())])}),ve(()=>(x(l()),a(r),x(p())),()=>{P(s,Array.from({length:l()}).map((o,w)=>{const N=w*2*Math.PI/l()-Math.PI/2,F=45;return{x:50+F*Math.cos(N),y:50+F*Math.sin(N),active:a(r)[w],isCurrent:p()%l()===w}}))}),ve(()=>a(s),()=>{P(i,a(s).filter(o=>o.active).map(o=>`${o.x},${o.y}`).join(" "))}),nn(),Je();var R=la(),y=v(R),M=m(v(y)),C=m(M);On(C,1,()=>a(s),Nn,(o,w)=>{var N=es(),F=Gt(N);{var A=I=>{var H=ia();let ee;W(()=>{re(H,"cx",(a(w),g(()=>a(w).x))),re(H,"cy",(a(w),g(()=>a(w).y))),re(H,"r",(a(w),g(()=>a(w).isCurrent?3:2))),re(H,"fill",c()),ee=$(H,0,"svelte-ia7egi",null,ee,{current:a(w).isCurrent})}),Y(I,H)};pe(F,I=>{a(w),g(()=>a(w).active)&&I(A)})}Y(o,N)});var b=m(C);{var T=o=>{var w=aa();W(()=>{re(w,"x2",(a(s),x(p()),x(l()),g(()=>a(s)[p()%l()].x))),re(w,"y2",(a(s),x(p()),x(l()),g(()=>a(s)[p()%l()].y)))}),Y(o,w)};pe(b,o=>{a(s),g(()=>a(s).length>0)&&o(T)})}var D=m(b);{var B=o=>{var w=oa(),N=v(w);W(()=>{re(w,"fill",c()),V(N,d())}),Y(o,w)};pe(D,o=>{d()&&o(B)})}W(()=>{Ui(R,`width: ${h()*2}px; height: ${h()*2}px;`),re(M,"points",a(i)),re(M,"fill",c()),re(M,"stroke",c())}),Y(e,R),je()}var ua=X('<p class="text-xs text-neutral-500"> </p>'),fa=X('<p class="text-xs text-neutral-500"> </p>'),ca=X('<div class="bg-neutral-800 rounded-xl p-8 shadow-xl border border-neutral-700"><div class="flex items-center justify-center gap-4 mb-6"><span> </span> <span class="text-neutral-500 text-sm font-mono"> </span></div> <div class="flex flex-wrap justify-center items-center gap-8 py-4"><!> <!></div> <div class="mt-6 text-center"><!></div></div>');function da(e,t){Fe(t,!1);let n=E(t,"rhythmMode",8,0),r=E(t,"primarySteps",8,16),s=E(t,"primaryPulses",8,4),i=E(t,"primaryRotation",8,0),l=E(t,"primaryPattern",24,()=>[]),f=E(t,"secondarySteps",8,12),u=E(t,"secondaryPulses",8,3),c=E(t,"secondaryRotation",8,0),d=E(t,"secondaryPattern",24,()=>[]),p=E(t,"currentStep",8,0),h=E(t,"rhythmDensity",8,.5),_=E(t,"rhythmTension",8,.3);Je();var S=ca(),R=v(S),y=v(R),M=v(y),C=m(y,2),b=v(C),T=m(R,2),D=v(T);{let I=Ne(()=>(x(l()),g(()=>l().length>0?l():null))),H=Ne(()=>n()===0?"#ff3e00":"#a855f7"),ee=Ne(()=>n()===0?"PRIMARY":"GROOVE"),De=Ne(()=>n()===0?120:150);vr(D,{get steps(){return r()},get pulses(){return s()},get rotation(){return i()},get externalPattern(){return a(I)},get color(){return a(H)},get label(){return a(ee)},get currentStep(){return p()},get radius(){return a(De)}})}var B=m(D,2);{var o=I=>{{let H=Ne(()=>(x(d()),g(()=>d().length>0?d():null)));vr(I,{get steps(){return f()},get pulses(){return u()},get rotation(){return c()},get externalPattern(){return a(H)},color:"#4ade80",label:"SECONDARY",get currentStep(){return p()},radius:120})}};pe(B,I=>{n()===0&&I(o)})}var w=m(T,2),N=v(w);{var F=I=>{var H=ua(),ee=v(H);W(()=>V(ee,`${r()??""}:${f()??""} polyrhythm (${s()??""}/${r()??""} vs ${u()??""}/${f()??""})`)),Y(I,H)},A=I=>{var H=fa(),ee=v(H);W((De,Xe)=>V(ee,`Density: ${De??""}% | Tension: ${Xe??""}%`),[()=>(x(h()),g(()=>(h()*100).toFixed(0))),()=>(x(_()),g(()=>(_()*100).toFixed(0)))]),Y(I,H)};pe(N,I=>{n()===0?I(F):I(A,!1)})}W(()=>{$(y,1,`px-3 py-1 rounded-full text-sm font-semibold
      ${n()===0?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-purple-500/20 text-purple-400 border border-purple-500/50"}`),V(M,n()===0?"Euclidean":"PerfectBalance"),V(b,`${r()??""} steps`)}),Y(e,S),je()}var ha=X('<div class="text-neutral-600 text-sm mx-1">-></div>'),va=X('<div class="flex items-center"><div> </div> <!></div>'),pa=X('<div class="bg-neutral-800 rounded-xl p-6 shadow-xl border border-neutral-700"><h2 class="text-xl font-bold mb-2 text-center text-purple-300">Harmonic Context</h2> <div class="flex justify-center gap-2 mb-2"><span> </span></div> <p class="text-xs text-neutral-400 text-center mb-4"> </p> <div class="flex justify-center items-center gap-3 flex-wrap mb-4"></div> <div class="flex justify-between items-center bg-neutral-900/50 rounded p-2"><span class="text-sm text-neutral-400"> </span> <span> </span></div></div>');function _a(e,t){Fe(t,!1);let n=E(t,"currentChord",8,"I"),r=E(t,"currentMeasure",8,1),s=E(t,"isMinorChord",8,!1),i=E(t,"progressionName",8,""),l=E(t,"progressionChords",24,()=>[]),f=E(t,"harmonyMode",8,1);Je();var u=pa(),c=m(v(u),2),d=v(c),p=v(d),h=m(c,2),_=v(h),S=m(h,2);On(S,5,l,Nn,(T,D,B)=>{var o=va(),w=v(o),N=v(w),F=m(w,2);{var A=I=>{var H=ha();Y(I,H)};pe(F,I=>{x(l()),g(()=>B<l().length-1)&&I(A)})}W(()=>{$(w,1,`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold transition-all duration-300
            ${n()===a(D)?"bg-purple-600 text-white scale-110 shadow-lg shadow-purple-500/50":"bg-neutral-700 text-neutral-400"}`),V(N,a(D)||"?")}),Y(T,o)});var R=m(S,2),y=v(R),M=v(y),C=m(y,2),b=v(C);W(()=>{$(d,1,`text-xs px-2 py-1 rounded ${f()===0?"bg-green-500/30 text-green-300":"bg-cyan-500/30 text-cyan-300"}`),V(p,f()===0?"Basic":"Driver"),V(_,i()),V(M,`Measure ${r()??""}`),$(C,1,`text-2xl font-bold ${s()?"text-blue-400":"text-yellow-400"}`),V(b,n())}),Y(e,u),je()}var ma=X('<span class="key-info svelte-13jqdpc"> </span>'),ya=X('<div class="error svelte-13jqdpc"> </div>'),ga=X('<div class="main-content svelte-13jqdpc"><div class="visualizations svelte-13jqdpc"><!> <!></div> <div class="controls svelte-13jqdpc"><!></div></div>'),ba=X('<div class="vst-container svelte-13jqdpc"><header class="header svelte-13jqdpc"><h1 class="svelte-13jqdpc">Harmonium</h1> <span class="subtitle svelte-13jqdpc">Morphing Music Engine</span> <!></header> <!></div>');function xa(e,t){Fe(t,!1);let n=z(null),r=z(rs()),s=null,i=z(""),l=z(0),f=-1,u=16,c=0,d=!0,p=z([]);ns(async()=>{try{P(n,new Zi),await a(n).connect(),s=a(n).subscribe(b=>{const T=b.rhythmMode!==c,D=b.primarySteps!==u,B=b.isEmotionMode!==d;(T||D||B)&&(f=-1,u=b.primarySteps,c=b.rhythmMode,d=b.isEmotionMode);const o=b.currentStep;if(o!==f){let N=o-f;N<0&&(N+=b.primarySteps),f===-1?P(l,o):P(l,a(l)+N),f=o}b.progressionLength!==a(p).length&&P(p,Array(b.progressionLength).fill("?"));const w=b.currentMeasure>0?(b.currentMeasure-1)%a(p).length:0;w<a(p).length&&(U(p,a(p)[w]=b.currentChord),P(p,[...a(p)])),P(r,b)})}catch(b){console.error("Failed to connect bridge:",b),P(i,String(b))}}),Vi(()=>{s?.(),a(n)?.disconnect()}),Je();var h=ba(),_=v(h),S=m(v(_),4);{var R=b=>{var T=ma(),D=v(T);W(()=>V(D,`${a(r).key??""} ${a(r).scale??""}`)),Y(b,T)};pe(S,b=>{a(r).key&&a(r).scale&&b(R)})}var y=m(_,2);{var M=b=>{var T=ya(),D=v(T);W(()=>V(D,a(i))),Y(b,T)},C=b=>{var T=ga(),D=v(T),B=v(D);da(B,{get rhythmMode(){return a(r).rhythmMode},get primarySteps(){return a(r).primarySteps},get primaryPulses(){return a(r).primaryPulses},get primaryRotation(){return a(r).primaryRotation},get primaryPattern(){return a(r).primaryPattern},get secondarySteps(){return a(r).secondarySteps},get secondaryPulses(){return a(r).secondaryPulses},get secondaryRotation(){return a(r).secondaryRotation},get secondaryPattern(){return a(r).secondaryPattern},get currentStep(){return a(l)},get rhythmDensity(){return a(r).rhythmDensity},get rhythmTension(){return a(r).rhythmTension}});var o=m(B,2);_a(o,{get currentChord(){return a(r).currentChord},get currentMeasure(){return a(r).currentMeasure},get isMinorChord(){return a(r).isMinorChord},get progressionName(){return a(r).progressionName},get progressionChords(){return a(p)},get harmonyMode(){return a(r).harmonyMode}});var w=m(D,2),N=v(w);{var F=A=>{var I=es(),H=Gt(I);Fi(H,()=>a(n),ee=>{sa(ee,{get state(){return a(r)},get bridge(){return a(n)}})}),Y(A,I)};pe(N,A=>{a(n)&&A(F)})}Y(b,T)};pe(y,b=>{a(i)?b(M):b(C,!1)})}Y(e,h),je()}ki(xa,{target:document.getElementById("app")});
